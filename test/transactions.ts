import * as chai from 'chai';
import * as chaiAsPromised from 'chai-as-promised';

chai.use(chaiAsPromised);
const expect = chai.expect;

import 'mocha';
import * as dotenv from "dotenv";
import { Tangocrypto, Network } from '../index';
import { TransactionApi } from '../src/clients/transactions';
import { BuildTxRequest } from '../src/models/transaction';
import { Seed } from '../utils/serialization.util';
import { Transaction } from '@emurgo/cardano-serialization-lib-nodejs';

dotenv.config();
describe('Transactions API endpoints', function () {
    this.timeout(0);
    let api: TransactionApi;

    before('Initializing API ...', () => {

        api = new Tangocrypto({
            network: Network.CARDANO_TESTNET_STAGING,
            apiKey: process.env.API_KEY!,
            appId: process.env.APP_ID!,
            version: process.env.VERSION
        }).transaction();
    })

    it('should get tx fees', () => {
        const fee = 198413;
        const cborTx = "84a7008282582023b88902bbe331016c076af669f302adda2a636b197edfbaaac42647a5f7116900825820581114c1ecf58572c8f33fdbf30fb8706ea1b01c6d0f0b623a32500887ce3f9c0001848258390101f62e66aa92aac05975233393706045f70bd846d2900c44af79fd5fa3addd0dff21ac4dba8430bdad408a4b8918e43d976358ebda9004fe1a00110b5c8258390101f62e66aa92aac05975233393706045f70bd846d2900c44af79fd5fa3addd0dff21ac4dba8430bdad408a4b8918e43d976358ebda9004fe821a00117e5ca1581c0e939228b3c1884b6adfb92df1e8430067c2351ee9ed199ab375a47da146746f6b656e320182583901e580c04a2459b30520ce6a9a46f29a0d7c8b41d31a5d9c4b41d18b122720ef2a2b16038efbffc1aefe14750465cbada4cf2ca4b15deb90ab1a007a1200825839017d0edb9ec338aa75744e6f4100ea54a3d0b0b6ed97853b52184edadfdeca8f39974573fbccb1c2d349fb24f741fe7b4dc19693f0d2287cfa1a001e8480021a0002fbe1031a052bc16f0758207d926db75a0b1f8cb587608a7f58536e55aad599d1efc5356c132b08fad45b77080009a1581c0e939228b3c1884b6adfb92df1e8430067c2351ee9ed199ab375a47da146746f6b656e3201a2008282582080bc9f79924168536a378cab034ed015b0b7d5879bbfa2fd7288700cf3eba2e958406bd3559266930e83c13a35fb88ac5f02b822a6b41f0f8929d9cb48a88b30cf9fda5d5da87730c46d1e3617f83228748b498e0b8d72f80532684eddd72caff70e825820abf66c17964e3cd520b3961aaa8d4b3009ebfb1d9bfe2efb0202e923669f08dc5840feba6b12e526ed10504f797633c870ec20c6246a03a4b0d140378cad0f7e88c1c3f8a963d93f1ae63e864fa010295d97a53d19799b06777293d0006afb72200801818201828200581cd5c22f154af111ad3d042455dbf6e97c49a68f4bd909a29a2471d39a82051a052bc16ff5a11902d1a178383065393339323238623363313838346236616466623932646631653834333030363763323335316565396564313939616233373561343764a166746f6b656e32a86972696768745f65796568776964652073657465696d6167657835697066733a2f2f516d573935683641545764556b38654248327442424e527457377a4e74786358595867325a62387735416e326d48656d6f75746866636c6f73656465636f6c6f7263627565646e616d6566746f6b656e32686c6566745f6579656970726f6d696e656e74696d656469615479706569696d6167652f706e676a636f6c6c656374696f6e75496d706f72742066726f6d206e6674206d616b6572";

        const tx_fee = Number(Seed.getTransactionFee(Transaction.from_bytes(Buffer.from(cborTx, 'hex'))).to_str());
        expect(tx_fee).equal(fee);
    })

    it('should get address', () => {
        const script_addr = "addr_test1wqpg7vptl9dhm8mffd0nyqsjkcz223schqhmypfmpf55l2gzqggx7";
        const script = "590cf7590cf40100003323233223232332232333222323332223233333333222222223233322232333322223232332232333222323332223232332233223232333332222233223322332233223322332233222222323253353033333006300800530070043333573466e1cd55cea8012400046601664646464646464646464646666ae68cdc39aab9d500a480008cccccccccc064cd409c8c8c8cccd5cd19b8735573aa004900011980f981d1aba15002302c357426ae8940088c98d4c174cd5ce02f82f02e02d89aab9e5001137540026ae854028cd409c0a0d5d0a804999aa8173ae502d35742a010666aa05ceb940b4d5d0a80399a8138219aba15006335027335505404c75a6ae854014c8c8c8cccd5cd19b8735573aa0049000119a8109919191999ab9a3370e6aae7540092000233502933504275a6ae854008c11cd5d09aba2500223263530613357380c60c40c00be26aae7940044dd50009aba150023232323333573466e1cd55cea80124000466a04e66a084eb4d5d0a80118239aba135744a004464c6a60c266ae7018c18818017c4d55cf280089baa001357426ae8940088c98d4c174cd5ce02f82f02e02d89aab9e5001137540026ae854010cd409dd71aba15003335027335505475c40026ae854008c0e4d5d09aba2500223263530593357380b60b40b00ae26ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226aae7940044dd50009aba150023232323333573466e1d400520062301e303b357426aae79400c8cccd5cd19b875002480108c074c114d5d09aab9e500423333573466e1d400d20022301d3030357426aae7940148cccd5cd19b875004480008c080dd71aba135573ca00c464c6a60a866ae7015815414c14814414013c4d55cea80089baa001357426ae8940088c98d4c134cd5ce027827026025882689931a982619ab9c4901035054350004d04b135573ca00226ea8005410941088848cc00400c0088004888888888848cccccccccc00402c02802402001c01801401000c00880048848cc00400c008800448848cc00400c0084800448848cc00400c0084800448848cc00400c00848004848888c010014848888c00c014848888c008014848888c004014800448c88c008dd6000990009aa81b111999aab9f0012500e233500d30043574200460066ae880080d88c8c8c8cccd5cd19b8735573aa006900011998039919191999ab9a3370e6aae754009200023300d303135742a00466a02605a6ae84d5d1280111931a981d19ab9c03c03b039038135573ca00226ea8004d5d0a801999aa805bae500a35742a00466a01eeb8d5d09aba25002232635303633573807006e06a06826ae8940044d55cf280089baa00122212333001004003002200122123300100300220011335500175ceb44488c88c008dd5800990009aa81811191999aab9f002250092335008335502e300635573aa004600a6aae794008c010d5d100181889aba10011122002122122330010040031200112232323333573466e1d400520002350083005357426aae79400c8cccd5cd19b87500248008940208c98d4c0b4cd5ce01781701601581509aab9d500113754002242446004006224400224002464646666ae68cdc39aab9d5002480008cc018c01cd5d0a8011bad357426ae8940088c98d4c09ccd5ce01481401301289aab9e50011375400244246600200600440024646666ae68cdc39aab9d5001480008dd71aba135573ca004464c6a604666ae700940900880844dd500089119191999ab9a3370ea00290021280391999ab9a3370ea004900111a80518031aba135573ca00846666ae68cdc3a801a40004a014464c6a604c66ae700a009c09409008c0884d55cea80089baa00112122230030041122200211222001120012323333573466e1d40052002200623333573466e1d400920002006232635301e33573804003e03a03803626aae74dd50008910010910009000919191919191999ab9a3370ea0029006100591999ab9a3370ea0049005100691999ab9a3370ea00690041198059bae35742a00a6eb4d5d09aba2500523333573466e1d4011200623300d375c6ae85401cdd71aba135744a00e46666ae68cdc3a802a400846602460286ae854024dd71aba135744a01246666ae68cdc3a8032400446028602a6ae84d55cf280591999ab9a3370ea00e900011809980b1aba135573ca018464c6a604666ae7009409008808408007c07807407006c4d55cea80209aab9e5003135573ca00426aae7940044dd500090911111118038041109111111198030048041091111111802804091111110020911111100191091111111980100480411091111111980080480410009191919191999ab9a3370ea002900111998041bad35742a0086eb4d5d0a8019bad357426ae89400c8cccd5cd19b875002480008c028c02cd5d09aab9e5006232635301433573802c02a02602402226aae75400c4d5d1280089aab9e5001137540024244600400644424466600200a0080064002464646666ae68cdc3a800a40044600c6eb8d5d09aab9e500323333573466e1d4009200023008375c6ae84d55cf280211931a980719ab9c01000f00d00c00b135573aa00226ea80048488c00800c8488c00400c800444888c8c8cccd5cd19b8735573aa0049000119aa80418031aba150023005357426ae8940088c98d4c02ccd5ce00680600500489aab9e50011375400222442466002006004224002246666ae68cdc39aab9d37540029000100291931a980219ab9c006005003002498480048005241035054310011232300100122330033002002001333223332223333222233223322332233322233223322332233332222332232323233223233322222223235302b00435302b0035335302853353028332235301b002222222222253353501233355301512001335017225335350140022100310015013253353035333573466e3c0300040dc0d84d40540045405000c840dc40d54004d4c0540148800840a84cd5ce24811f62656e65666963696172792773207369676e6174757265206d697373696e6700029153353028333222353502100222353502700222353502500522353502b0022253335301c333501800b0060021533530330011533530330051333501700b00300710341333501700b00300710341333501700b00300733333333501022333573466e1c0080040b00ac894cd4c0a8ccd5cd19b8700200102c02b101615335302a333573466e240080040b00ac4050405488ccd5cd19b8800200102c02b22333573466e240080040b00ac88ccd5cd19b8900200102b02c22333573466e200080040ac0b0894cd4c0a8ccd5cd19b8900200102c02b10011002225335302a333573466e240080040b00ac40084004cd407ccd408cd409cd4c054014880040a8cd408540940a8d4c0654004888888888801040a84cd5ce24914646561646c696e65206e6f7420726561636865640002910291353016001220021212230020031122001120013200132323001001223300330020020012211222533535017001135350060032200122133353500800522002300400233355300712001005004001122123300100300212001122235350170022235350190032253335300c33350080070040021533530230031001102510241025122232323232533353501e00621533353501f0062153335350200082130044984c00d26153335350200072130044984c00d261010100e1533353501f0072130044984c00d261533353501f0062130044984c00d26100f1533353501e0052100d100e100c1533353501e00521533353501f0072130054984c011261533353501f0062130054984c01126100f100d1533353501e0062130054984c011261533353501e0052130054984c01126100e2533353501e00521533353501f00721533353502000721333500b00a002001161616100e1533353501e00621533353501f00621333500a009002001161616100d100c2533353501d00421533353501e00621533353501f00621333500a009002001161616100d1533353501d00521533353501e005213335009008002001161616100c100b2533353501c00321533353501d00521533353501e005213335009008002001161616100c1533353501c00421533353501d004213335008007002001161616100b100a2533353501b00221533353501c00421533353501d004213335008007002001161616100b1533353501b00321533353501c003213335007006002001161616100a100912353500200122222222007122222222123333333300100900800700600500400300212001122200312220021222001200122123300100300220012212330010030022001222222222212333333333300100b00a009008007006005004003002200111220021221223300100400312001122123300100300212001122123300100300212001122123300100300212001121222300300411222002112220011200112200212200120011200120013322330024891cc2ff616e11299d9094ce0a7eb5b7284b705147a822f4ffbd471f971a00483032a9a1f4d7c8848cc00400c0088005";

        const addr = Seed.getScriptAddressFromScript(script, 'testnet');
        const addr2 = Seed.getScriptAddressFromScriptHash('028f302bf95b7d9f694b5f320212b604a54618b82fb2053b0a694fa9', 'testnet');
        expect(addr.to_bech32('addr_test')).equal(script_addr);
        expect(addr2.to_bech32('addr_test')).equal(script_addr);
    })

    it('should build a tx', async () => {
        // arrange
        const request: BuildTxRequest = {
            "inputs": [
                {
                    "address": "addr_test1qpemm54tmynjhuyw0qhzdpnras29c3pc8gxvc4afpsa3uwglmrag6mlare663x64ugkkv8nqhqg3z6u78xa49fq6wmts55h5y9",
                    "hash": "719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b1429453044",
                    "index": 1,
                    "value": 1482726,
                    "assets": [
                        {
                            "policy_id": "ef3c47ccb75e6d77e4a4c018a0ec1b8d88c253fd72b4ec29f760756e",
                            "asset_name": "T #023",
                            "quantity": 1
                        },
                        {
                            "policy_id": "ef3c47ccb75e6d77e4a4c018a0ec1b8d88c253fd72b4ec29f760756e",
                            "asset_name": "TTTTTTTTTTTTT #000",
                            "quantity": 1
                        }
                    ]
                },
                {
                    "address": "addr_test1qpemm54tmynjhuyw0qhzdpnras29c3pc8gxvc4afpsa3uwglmrag6mlare663x64ugkkv8nqhqg3z6u78xa49fq6wmts55h5y9",
                    "hash": "719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b1429453044",
                    "index": 0,
                    "value": 48183053,
                    "assets": []
                }
            ],
            "recipients": {
                "addr_test1qzy4e509u7jtztnn0p3v6rypup5w48t63pgkhtsup6anumqrejvpmpdfe7zt662gdx98f3d5a0phjrh6hvxyjhecpe3q422hpz": [
                    {
                        "policy_id": "18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8",
                        "asset_name": "BuildTxTest#001",
                        "quantity": 1,
                        "metadata": {
                            "721": {
                                "cdf7a949cca0d57a27f862d525e4d4c734c1d503cbc7f04c1ac2350e": {
                                    "BuildTxTest#001": {
                                        "name": "BuildTxTest #001",
                                        "image": "ipfs://QmbFhLR5C6BmTW7apgDMVmGozLuEUZwoezcgHQeULT59M5",
                                        "description": "Little BuildTxTest description"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "policy_id": "18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8",
                        "asset_name": "BuildTxTest#003",
                        "quantity": 1,
                        "metadata": {
                            "721": {
                                "cdf7a949cca0d57a27f862d525e4d4c734c1d503cbc7f04c1ac2350e": {
                                    "BuildTxTest#003": {
                                        "name": "BuildTxTest #003",
                                        "image": "ipfs://QmbFhLR5C6BmTW7apgDMVmGozLuEUZwoezcgHQeULT59M5",
                                        "description": "Little BuildTxTest description"
                                    }
                                }
                            }
                        }
                    }
                ],
                "addr_test1qp9mj7vnenx4v99hw7ztfq03n7dmmujpgtlyfjhhel9w67nk72usllcew208n60ym94xcptfrgytuy5apwp565x28jgsg0ztq3": [
                    {
                        "policy_id": "18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8",
                        "asset_name": "BuildTxTest#003",
                        "quantity": 1,
                        "metadata": {
                            "721": {
                                "cdf7a949cca0d57a27f862d525e4d4c734c1d503cbc7f04c1ac2350e": {
                                    "BuildTxTest#002": {
                                        "name": "BuildTxTest #003",
                                        "image": "ipfs://QmbFhLR5C6BmTW7apgDMVmGozLuEUZwoezcgHQeULT59M5",
                                        "description": "Little BuildTxTest description 3"
                                    }
                                }
                            }
                        }
                    }
                ]
            },
            "minting_script": {
                "type": "all",
                "scripts": [
                    {
                        "type": "sig",
                        "keyHash": "1aabe8cdb1153e11c3363270fd11baef2ca758e56d9a0866e73f7dc5"
                    },
                    {
                        "type": "before",
                        "slot": 196536677
                    }
                ]
            },
            "change_address": "addr_test1qpemm54tmynjhuyw0qhzdpnras29c3pc8gxvc4afpsa3uwglmrag6mlare663x64ugkkv8nqhqg3z6u78xa49fq6wmts55h5y9"
        }

        const buildTx = {
            tx_id: "2f657ee1a618f9c684f68834429c5ee9036b8e10144b9c1396460a65a80981d8",
            tx: "84a70082825820719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b142945304401825820719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b14294530440001858258390073bdd2abd9272bf08e782e268663ec145c44383a0ccc57a90c3b1e391fd8fa8d6ffd1e75a89b55e22d661e60b811116b9e39bb52a41a76d71a0290eb788258390073bdd2abd9272bf08e782e268663ec145c44383a0ccc57a90c3b1e391fd8fa8d6ffd1e75a89b55e22d661e60b811116b9e39bb52a41a76d7821a00169fe6a1581cef3c47ccb75e6d77e4a4c018a0ec1b8d88c253fd72b4ec29f760756ea24654202330323301525454545454545454545454545420233030300182583900895cd1e5e7a4b12e737862cd0c81e068ea9d7a88516bae1c0ebb3e6c03cc981d85a9cf84bd6948698a74c5b4ebc3790efabb0c495f380e62821a00172698a1581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a24f4275696c6454785465737423303031014f4275696c645478546573742330303301825839004bb97993cccd5614b77784b481f19f9bbdf24142fe44caf7cfcaed7a76f2b90fff19729e79e9e4d96a6c05691a08be129d0b834d50ca3c91821a00150bd0a1581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a14f4275696c6454785465737423303033018258390071a80da0d4a4bd672b82dda5d73fd902cc87ba258d80c22d6319548e98eea0fdc74e2cff6f4d6e6dd97364822f2bf9a265f270ca92d20615821a001e8480a1581c581180fd4d301e925c123e3f1fe78cee670369bf4cca4a9ff3e564d7a14a544553545f54414e474f03021a000394ad031a0bb6e965075820b7ad7c2629bc1df95d1ff05804f4373da36cbc1b21a734607ec1834e7ca97499080009a2581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a24f4275696c6454785465737423303031014f4275696c645478546573742330303302581c581180fd4d301e925c123e3f1fe78cee670369bf4cca4a9ff3e564d7a14a544553545f54414e474f03a2008182582098205c493e7853dd7bc69458646abecd97e86c9441cc2a9034ae01d71561ae185840741403d14c947ee7652a72e0926eb8f7b5c9b2c79158aedead2dc1cd777903046337844c0032ed608c5679f9b8e6394cf2e697eed245475bade05cb02ce3c40601828201828200581c1aabe8cdb1153e11c3363270fd11baef2ca758e56d9a0866e73f7dc582051a0bb6e9658201828200581c8e1cabc60001e3dba8cbba922d804282f161caa93019dcf38d785d368200581c10e327f6e5aaf7647dbd0bac71c166238573e7046459d2158798d1cbf5a11902d1a178386364663761393439636361306435376132376638363264353235653464346337333463316435303363626337663034633161633233353065a36f4275696c6454785465737423303031a3646e616d65704275696c64547854657374202330303165696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e781e4c6974746c65204275696c64547854657374206465736372697074696f6e6f4275696c6454785465737423303033a3646e616d65704275696c64547854657374202330303365696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e781e4c6974746c65204275696c64547854657374206465736372697074696f6e6f4275696c6454785465737423303032a3646e616d65704275696c64547854657374202330303365696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e78204c6974746c65204275696c64547854657374206465736372697074696f6e2033"
        }

        // act
        const response = await api.buildTransaction(request);

        // assert
        expect(response.result).deep.equal(buildTx);
    })

    it('should sign a tx', async () => {
        // arrange
        const keys = [
            'xprv1gpn7d2h38j5ukpvmuz4mmrlgaprx6pcp53987ff8lkuqk2ztd4p2fdfpap4ev98hg3uj8kd36wzva3av8r776ke50dhhkm2ktpca83tj46xlscy6d7qga23ql4nn7z2hl9a4r3gqgpt6n7glv57nwkf80ypl5j63',
            'xprv1zpetq5ux75u7gsryanjp7f4l39znck0x45myxrkwqh2qr8cxne9ndrt2g28kaqgc3s0er09haaxflwzljcgytmhklswtas42kd0ajsvz404dkvjje5j6wh3envwd25w728vzwzv46mlf9nzz0683ncju9y04jv8j' // minting script   
        ];
        const cborTx = '84a70082825820719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b142945304401825820719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b14294530440001858258390073bdd2abd9272bf08e782e268663ec145c44383a0ccc57a90c3b1e391fd8fa8d6ffd1e75a89b55e22d661e60b811116b9e39bb52a41a76d71a0290eb788258390073bdd2abd9272bf08e782e268663ec145c44383a0ccc57a90c3b1e391fd8fa8d6ffd1e75a89b55e22d661e60b811116b9e39bb52a41a76d7821a00169fe6a1581cef3c47ccb75e6d77e4a4c018a0ec1b8d88c253fd72b4ec29f760756ea24654202330323301525454545454545454545454545420233030300182583900895cd1e5e7a4b12e737862cd0c81e068ea9d7a88516bae1c0ebb3e6c03cc981d85a9cf84bd6948698a74c5b4ebc3790efabb0c495f380e62821a00172698a1581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a24f4275696c6454785465737423303031014f4275696c645478546573742330303301825839004bb97993cccd5614b77784b481f19f9bbdf24142fe44caf7cfcaed7a76f2b90fff19729e79e9e4d96a6c05691a08be129d0b834d50ca3c91821a00150bd0a1581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a14f4275696c6454785465737423303033018258390071a80da0d4a4bd672b82dda5d73fd902cc87ba258d80c22d6319548e98eea0fdc74e2cff6f4d6e6dd97364822f2bf9a265f270ca92d20615821a001e8480a1581c581180fd4d301e925c123e3f1fe78cee670369bf4cca4a9ff3e564d7a14a544553545f54414e474f03021a000394ad031a0bb6e965075820b7ad7c2629bc1df95d1ff05804f4373da36cbc1b21a734607ec1834e7ca97499080009a2581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a24f4275696c6454785465737423303031014f4275696c645478546573742330303302581c581180fd4d301e925c123e3f1fe78cee670369bf4cca4a9ff3e564d7a14a544553545f54414e474f03a2008182582098205c493e7853dd7bc69458646abecd97e86c9441cc2a9034ae01d71561ae185840741403d14c947ee7652a72e0926eb8f7b5c9b2c79158aedead2dc1cd777903046337844c0032ed608c5679f9b8e6394cf2e697eed245475bade05cb02ce3c40601828201828200581c1aabe8cdb1153e11c3363270fd11baef2ca758e56d9a0866e73f7dc582051a0bb6e9658201828200581c8e1cabc60001e3dba8cbba922d804282f161caa93019dcf38d785d368200581c10e327f6e5aaf7647dbd0bac71c166238573e7046459d2158798d1cbf5a11902d1a178386364663761393439636361306435376132376638363264353235653464346337333463316435303363626337663034633161633233353065a36f4275696c6454785465737423303031a3646e616d65704275696c64547854657374202330303165696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e781e4c6974746c65204275696c64547854657374206465736372697074696f6e6f4275696c6454785465737423303033a3646e616d65704275696c64547854657374202330303365696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e781e4c6974746c65204275696c64547854657374206465736372697074696f6e6f4275696c6454785465737423303032a3646e616d65704275696c64547854657374202330303365696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e78204c6974746c65204275696c64547854657374206465736372697074696f6e2033';

        const expected = '84a70082825820719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b142945304401825820719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b14294530440001858258390073bdd2abd9272bf08e782e268663ec145c44383a0ccc57a90c3b1e391fd8fa8d6ffd1e75a89b55e22d661e60b811116b9e39bb52a41a76d71a0290eb788258390073bdd2abd9272bf08e782e268663ec145c44383a0ccc57a90c3b1e391fd8fa8d6ffd1e75a89b55e22d661e60b811116b9e39bb52a41a76d7821a00169fe6a1581cef3c47ccb75e6d77e4a4c018a0ec1b8d88c253fd72b4ec29f760756ea24654202330323301525454545454545454545454545420233030300182583900895cd1e5e7a4b12e737862cd0c81e068ea9d7a88516bae1c0ebb3e6c03cc981d85a9cf84bd6948698a74c5b4ebc3790efabb0c495f380e62821a00172698a1581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a24f4275696c6454785465737423303031014f4275696c645478546573742330303301825839004bb97993cccd5614b77784b481f19f9bbdf24142fe44caf7cfcaed7a76f2b90fff19729e79e9e4d96a6c05691a08be129d0b834d50ca3c91821a00150bd0a1581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a14f4275696c6454785465737423303033018258390071a80da0d4a4bd672b82dda5d73fd902cc87ba258d80c22d6319548e98eea0fdc74e2cff6f4d6e6dd97364822f2bf9a265f270ca92d20615821a001e8480a1581c581180fd4d301e925c123e3f1fe78cee670369bf4cca4a9ff3e564d7a14a544553545f54414e474f03021a000394ad031a0bb6e965075820b7ad7c2629bc1df95d1ff05804f4373da36cbc1b21a734607ec1834e7ca97499080009a2581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a24f4275696c6454785465737423303031014f4275696c645478546573742330303302581c581180fd4d301e925c123e3f1fe78cee670369bf4cca4a9ff3e564d7a14a544553545f54414e474f03a2008382582098205c493e7853dd7bc69458646abecd97e86c9441cc2a9034ae01d71561ae185840741403d14c947ee7652a72e0926eb8f7b5c9b2c79158aedead2dc1cd777903046337844c0032ed608c5679f9b8e6394cf2e697eed245475bade05cb02ce3c406825820e46fdc0ff42bad0b7107bd89ecdd937e0297f13e8d7e68ca5d82b52343110fcd584092a04376b41780a787f52ca793b889aee155cd971214c1ef55f852a314a718cc1cf0904f825c1a0abccfa47d9df89fe5eeeb28e2fc093bd73b9884b3ea186a06825820f0e93930a1ea13247e73b7a332dad3b3048de90ac1147f9c4d5adb61ba46402e5840dc46f23f2f7d85cf8c9b52e2e4fb66985dfea3d596ead5a3950befbbb1e6d849f80fbfe80bda9326fecc35fe0ab48e8644155786641e57ff3d79bc2511a9c00801828201828200581c1aabe8cdb1153e11c3363270fd11baef2ca758e56d9a0866e73f7dc582051a0bb6e9658201828200581c8e1cabc60001e3dba8cbba922d804282f161caa93019dcf38d785d368200581c10e327f6e5aaf7647dbd0bac71c166238573e7046459d2158798d1cbf5a11902d1a178386364663761393439636361306435376132376638363264353235653464346337333463316435303363626337663034633161633233353065a36f4275696c6454785465737423303031a3646e616d65704275696c64547854657374202330303165696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e781e4c6974746c65204275696c64547854657374206465736372697074696f6e6f4275696c6454785465737423303033a3646e616d65704275696c64547854657374202330303365696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e781e4c6974746c65204275696c64547854657374206465736372697074696f6e6f4275696c6454785465737423303032a3646e616d65704275696c64547854657374202330303365696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e78204c6974746c65204275696c64547854657374206465736372697074696f6e2033';

        // act
        const signed = await api.signTransaction({ keys, tx: cborTx });

        // assert
        expect(signed).equal(expected);
    })

    it('should submit tx', async () => {
        // arrange
        const tx = '84a70082825820719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b142945304401825820719f14091e80bebafae17e2fcb3b59c8055bbfd35d163e0b0e3a5b14294530440001858258390073bdd2abd9272bf08e782e268663ec145c44383a0ccc57a90c3b1e391fd8fa8d6ffd1e75a89b55e22d661e60b811116b9e39bb52a41a76d71a0290eb788258390073bdd2abd9272bf08e782e268663ec145c44383a0ccc57a90c3b1e391fd8fa8d6ffd1e75a89b55e22d661e60b811116b9e39bb52a41a76d7821a00169fe6a1581cef3c47ccb75e6d77e4a4c018a0ec1b8d88c253fd72b4ec29f760756ea24654202330323301525454545454545454545454545420233030300182583900895cd1e5e7a4b12e737862cd0c81e068ea9d7a88516bae1c0ebb3e6c03cc981d85a9cf84bd6948698a74c5b4ebc3790efabb0c495f380e62821a00172698a1581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a24f4275696c6454785465737423303031014f4275696c645478546573742330303301825839004bb97993cccd5614b77784b481f19f9bbdf24142fe44caf7cfcaed7a76f2b90fff19729e79e9e4d96a6c05691a08be129d0b834d50ca3c91821a00150bd0a1581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a14f4275696c6454785465737423303033018258390071a80da0d4a4bd672b82dda5d73fd902cc87ba258d80c22d6319548e98eea0fdc74e2cff6f4d6e6dd97364822f2bf9a265f270ca92d20615821a001e8480a1581c581180fd4d301e925c123e3f1fe78cee670369bf4cca4a9ff3e564d7a14a544553545f54414e474f03021a000394ad031a0bb6e965075820b7ad7c2629bc1df95d1ff05804f4373da36cbc1b21a734607ec1834e7ca97499080009a2581c18ed282beda4bec13226c427d4744d2642ba2cef404470b62ae184d8a24f4275696c6454785465737423303031014f4275696c645478546573742330303302581c581180fd4d301e925c123e3f1fe78cee670369bf4cca4a9ff3e564d7a14a544553545f54414e474f03a2008382582098205c493e7853dd7bc69458646abecd97e86c9441cc2a9034ae01d71561ae185840741403d14c947ee7652a72e0926eb8f7b5c9b2c79158aedead2dc1cd777903046337844c0032ed608c5679f9b8e6394cf2e697eed245475bade05cb02ce3c406825820e46fdc0ff42bad0b7107bd89ecdd937e0297f13e8d7e68ca5d82b52343110fcd584092a04376b41780a787f52ca793b889aee155cd971214c1ef55f852a314a718cc1cf0904f825c1a0abccfa47d9df89fe5eeeb28e2fc093bd73b9884b3ea186a06825820f0e93930a1ea13247e73b7a332dad3b3048de90ac1147f9c4d5adb61ba46402e5840dc46f23f2f7d85cf8c9b52e2e4fb66985dfea3d596ead5a3950befbbb1e6d849f80fbfe80bda9326fecc35fe0ab48e8644155786641e57ff3d79bc2511a9c00801828201828200581c1aabe8cdb1153e11c3363270fd11baef2ca758e56d9a0866e73f7dc582051a0bb6e9658201828200581c8e1cabc60001e3dba8cbba922d804282f161caa93019dcf38d785d368200581c10e327f6e5aaf7647dbd0bac71c166238573e7046459d2158798d1cbf5a11902d1a178386364663761393439636361306435376132376638363264353235653464346337333463316435303363626337663034633161633233353065a36f4275696c6454785465737423303031a3646e616d65704275696c64547854657374202330303165696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e781e4c6974746c65204275696c64547854657374206465736372697074696f6e6f4275696c6454785465737423303033a3646e616d65704275696c64547854657374202330303365696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e781e4c6974746c65204275696c64547854657374206465736372697074696f6e6f4275696c6454785465737423303032a3646e616d65704275696c64547854657374202330303365696d6167657835697066733a2f2f516d6246684c52354336426d545737617067444d566d476f7a4c7545555a776f657a6367485165554c5435394d356b6465736372697074696f6e78204c6974746c65204275696c64547854657374206465736372697074696f6e2033';

        const expectedTxId = '2f657ee1a618f9c684f68834429c5ee9036b8e10144b9c1396460a65a80981d8';

        // act
        const response = await api.submitTransaction({ tx });

        // assert
        expect(response.result.tx_id).equal(expectedTxId);
    })

    it('should get tx', async () => {
        // arrange
        const hash = '8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262';
        const tx = {
            "hash": "8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262",
            "block_index": 0,
            "out_sum": 573226974,
            "fee": 635377,
            "deposit": 0,
            "size": 10804,
            "valid_contract": true,
            "script_size": 0,
            "utxo_count": 8,
            "withdrawal_count": 0,
            "delegation_count": 0,
            "stake_cert_count": 0,
            "pool_update": false,
            "pool_retire": false,
            "block": {
                "hash": "df695afb9b28c70b38f497fc697a09876373cc80ac03873a170c2a5ff5dbe0a4",
                "epoch_no": 37,
                "slot_no": 14556752,
                "block_no": 362833
            },
            "assets": [
                {
                    "policy_id": "fb45417ab92a155da3b31a8928c873eb9fd36c62184c736f189d334c",
                    "asset_name": "tGimbal",
                    "fingerprint": "asset1gk6pv38w62xtztfavrghtj98gcuc73w07ldlwk",
                    "quantity": 900000,
                    "mint_or_burn_quantity": 0
                }
            ]
        }

        // act
        const response = await api.getTransaction(hash);

        // assert
        expect(response.result).deep.equal(tx);
    })

    it('should get tx metadata', async () => {
        // arrange
        const hash = 'a6ea1b7f2c96db8f097534a17f45cfa8934c9e9d70a0737b0ad90d7549de2724';
        const metadata = [
            {
                "label": "161803",
                "json": {
                    "id": "0003",
                    "hash": "7b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab7",
                    "txType": "Commitment",
                    "expTime": 1672573512255,
                    "contributor": "957aaaf3b663749e6fa6d57137bddf03acb5206320a84c17df12c7e4"
                }
            }
        ]

        // act
        const response = await api.getTransactionMetadata(hash);

        // assert
        expect(response.result.data).deep.equal(metadata);
    })

    it('should list tx utxos', async () => {
        // arrange
        const hash = '8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262';
        const utxos = {
            "hash": "8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262",
            "inputs": [
                {
                    "address": "addr_test1qpjjjht0at8ux0lq98630pthpkfrw05zeh3gc0xcc4dre5gp84zu07dh68eunt6qhczxps8xcvjh8kgsfudzx2x6429sg2ntsa",
                    "hash": "0235eebe85460cc9b2db9353410e18aabaa52482c4757faa9e848fdb8071e321",
                    "index": 5,
                    "value": 1500000,
                    "has_script": false,
                    "assets": [
                        {
                            "policy_id": "fb45417ab92a155da3b31a8928c873eb9fd36c62184c736f189d334c",
                            "asset_name": "tGimbal",
                            "fingerprint": "asset1gk6pv38w62xtztfavrghtj98gcuc73w07ldlwk",
                            "quantity": 900000
                        }
                    ]
                },
                {
                    "address": "addr_test1qpjjjht0at8ux0lq98630pthpkfrw05zeh3gc0xcc4dre5gp84zu07dh68eunt6qhczxps8xcvjh8kgsfudzx2x6429sg2ntsa",
                    "hash": "0235eebe85460cc9b2db9353410e18aabaa52482c4757faa9e848fdb8071e321",
                    "index": 0,
                    "value": 572362351,
                    "has_script": false,
                    "assets": []
                }
            ],
            "outputs": [
                {
                    "address": "addr_test1qqe5wnjzkhrgfvntj3dndzml7003h0n5ezen924qjrrglv6648u33jzvq2msza6gyqdcnau0njhav2sv46adkc9c8wdqx5aas8",
                    "hash": "8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262",
                    "index": 3,
                    "value": 1861920,
                    "has_script": false,
                    "assets": [],
                    "datum": {
                        "hash": "93892d0c469bd1228f0e94621d3101e755523e97ea0a837c9b509b1aeb9d8c42",
                        "value": {
                            "fields": [
                                {
                                    "list": [
                                        {
                                            "bytes": "464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e"
                                        },
                                        {
                                            "bytes": "a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a94"
                                        },
                                        {
                                            "bytes": "7b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab7"
                                        },
                                        {
                                            "bytes": "e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44"
                                        },
                                        {
                                            "bytes": "34adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3"
                                        }
                                    ]
                                },
                                {
                                    "bytes": "54726561737572794973737565726578616d706c65"
                                }
                            ],
                            "constructor": 0
                        },
                        "value_raw": "d8799f9f5820464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e5820a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a9458207b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab75820e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44582034adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3ff5554726561737572794973737565726578616d706c65ff"
                    },
                    "inline_datum": {
                        "hash": "93892d0c469bd1228f0e94621d3101e755523e97ea0a837c9b509b1aeb9d8c42",
                        "value": {
                            "fields": [
                                {
                                    "list": [
                                        {
                                            "bytes": "464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e"
                                        },
                                        {
                                            "bytes": "a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a94"
                                        },
                                        {
                                            "bytes": "7b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab7"
                                        },
                                        {
                                            "bytes": "e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44"
                                        },
                                        {
                                            "bytes": "34adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3"
                                        }
                                    ]
                                },
                                {
                                    "bytes": "54726561737572794973737565726578616d706c65"
                                }
                            ],
                            "constructor": 0
                        },
                        "value_raw": "d8799f9f5820464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e5820a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a9458207b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab75820e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44582034adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3ff5554726561737572794973737565726578616d706c65ff"
                    }
                },
                {
                    "address": "addr_test1qpjjjht0at8ux0lq98630pthpkfrw05zeh3gc0xcc4dre5gp84zu07dh68eunt6qhczxps8xcvjh8kgsfudzx2x6429sg2ntsa",
                    "hash": "8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262",
                    "index": 5,
                    "value": 1500000,
                    "has_script": false,
                    "assets": [
                        {
                            "policy_id": "fb45417ab92a155da3b31a8928c873eb9fd36c62184c736f189d334c",
                            "asset_name": "tGimbal",
                            "fingerprint": "asset1gk6pv38w62xtztfavrghtj98gcuc73w07ldlwk",
                            "quantity": 875000
                        }
                    ]
                },
                {
                    "address": "addr_test1wpr838k666akr3p5k8tfcdfenrlzpueq2j87tp7zkx6mh8qm8maf8",
                    "hash": "8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262",
                    "index": 4,
                    "value": 250000000,
                    "has_script": true,
                    "assets": [
                        {
                            "policy_id": "fb45417ab92a155da3b31a8928c873eb9fd36c62184c736f189d334c",
                            "asset_name": "tGimbal",
                            "fingerprint": "asset1gk6pv38w62xtztfavrghtj98gcuc73w07ldlwk",
                            "quantity": 25000
                        }
                    ],
                    "datum": {
                        "hash": "93892d0c469bd1228f0e94621d3101e755523e97ea0a837c9b509b1aeb9d8c42",
                        "value": {
                            "fields": [
                                {
                                    "list": [
                                        {
                                            "bytes": "464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e"
                                        },
                                        {
                                            "bytes": "a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a94"
                                        },
                                        {
                                            "bytes": "7b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab7"
                                        },
                                        {
                                            "bytes": "e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44"
                                        },
                                        {
                                            "bytes": "34adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3"
                                        }
                                    ]
                                },
                                {
                                    "bytes": "54726561737572794973737565726578616d706c65"
                                }
                            ],
                            "constructor": 0
                        },
                        "value_raw": "d8799f9f5820464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e5820a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a9458207b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab75820e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44582034adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3ff5554726561737572794973737565726578616d706c65ff"
                    },
                    "inline_datum": {
                        "hash": "93892d0c469bd1228f0e94621d3101e755523e97ea0a837c9b509b1aeb9d8c42",
                        "value": {
                            "fields": [
                                {
                                    "list": [
                                        {
                                            "bytes": "464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e"
                                        },
                                        {
                                            "bytes": "a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a94"
                                        },
                                        {
                                            "bytes": "7b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab7"
                                        },
                                        {
                                            "bytes": "e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44"
                                        },
                                        {
                                            "bytes": "34adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3"
                                        }
                                    ]
                                },
                                {
                                    "bytes": "54726561737572794973737565726578616d706c65"
                                }
                            ],
                            "constructor": 0
                        },
                        "value_raw": "d8799f9f5820464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e5820a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a9458207b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab75820e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44582034adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3ff5554726561737572794973737565726578616d706c65ff"
                    },
                    "script": {
                        "type": "plutusV2",
                        "hash": "46789edad6bb61c434b1d69c353998fe20f320548fe587c2b1b5bb9c",
                        "code": "59121c010000332332232323232323232323232323232323232322232322323223232533533300a3333573466e1cd55cea804240004646424660020060046eb8d5d09aba2500933500c75c6ae8540208c98c806ccd5ce00e00d80c9999ab9a3370ea0089001109100091999ab9a3370ea00a900011909118010019919191919191999ab9a3370e6aae7540152000232323232321233333001006005004003002375c6ae84d5d128031bad35742a00a6eb4d5d0a8029bad35742a00a6eb8d5d0a80291931901199ab9c024023021135744a00226ae8940044d5d1280089aab9e5001137540026ae84d55cf280391931900e19ab9c01d01c01a0193333573466e1cd55cea80124000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd406806cd5d0a80619a80d00d9aba1500b33501a01c35742a014666aa03ceb94074d5d0a804999aa80f3ae501d35742a01066a0340466ae85401cccd54078091d69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40b9d69aba15002302f357426ae8940088c98c80c4cd5ce01901881789aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a8173ad35742a004605e6ae84d5d1280111931901899ab9c03203102f135573ca00226ea8004d5d09aba2500223263202d33573805c05a05626aae7940044dd50009aba1500533501a75c6ae854010ccd540780808004d5d0a801999aa80f3ae200135742a00460446ae84d5d1280111931901499ab9c02a029027135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a00460246ae84d5d1280111931900d99ab9c01c01b019101a13263201a335738921035054350001a135573ca00226ea80044d55cea80089baa001135573ca00226ea800448c88c008dd6000990009aa80a111999aab9f00125016233501530043574200460066ae880080488c8c8cccd5cd19b8735573aa004900011991091980080180118051aba150023005357426ae8940088c98c8048cd5ce00980900809aab9e5001137540024646464646666ae68cdc39aab9d5004480008cccc888848cccc00401401000c008c8c8c8cccd5cd19b8735573aa004900011991091980080180118099aba1500233500d012357426ae8940088c98c805ccd5ce00c00b80a89aab9e5001137540026ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6403266ae7006806405c0580544d55cea80089baa00135742a00466a012eb8d5d09aba2500223263201333573802802602226ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab00132001355011223233335573e0044a028466a02666442466002006004600c6aae754008c014d55cf280118021aba200301013574200224464646666ae68cdc3a800a40004642446004006600a6ae84d55cf280191999ab9a3370ea0049001109100091931900819ab9c01101000e00d135573aa00226ea80048c8c8cccd5cd19b875001480188c848888c010014c01cd5d09aab9e500323333573466e1d400920042321222230020053009357426aae7940108cccd5cd19b875003480088c848888c004014c01cd5d09aab9e500523333573466e1d40112000232122223003005375c6ae84d55cf280311931900819ab9c01101000e00d00c00b135573aa00226ea80048c8c8cccd5cd19b8735573aa004900011991091980080180118029aba15002375a6ae84d5d1280111931900619ab9c00d00c00a135573ca00226ea80048c8cccd5cd19b8735573aa002900011bae357426aae7940088c98c8028cd5ce00580500409baa001232323232323333573466e1d4005200c21222222200323333573466e1d4009200a21222222200423333573466e1d400d2008233221222222233001009008375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c4664424444444660040120106eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc8848888888cc018024020c030d5d0a8049bae357426ae8940248cccd5cd19b875006480088c848888888c01c020c034d5d09aab9e500b23333573466e1d401d2000232122222223005008300e357426aae7940308c98c804ccd5ce00a00980880800780700680600589aab9d5004135573ca00626aae7940084d55cf280089baa0012323232323333573466e1d400520022333222122333001005004003375a6ae854010dd69aba15003375a6ae84d5d1280191999ab9a3370ea0049000119091180100198041aba135573ca00c464c6401866ae700340300280244d55cea80189aba25001135573ca00226ea80048c8c8cccd5cd19b875001480088c8488c00400cdd71aba135573ca00646666ae68cdc3a8012400046424460040066eb8d5d09aab9e500423263200933573801401200e00c26aae7540044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c6401466ae7002c02802001c0184d55cea80089baa0012323333573466e1d40052002212200223333573466e1d40092000212200123263200633573800e00c00800626aae74dd5000a4c240029201035054310011220021221223300100400311232300100122330033002002001332323232332232323232332232323232323233223232323232323232232222323232323232325335009215335533533355301a1200135018501c2333573466e3cd40388888801000408007d4018407c4cd5ce24920436f6e7472696220746f6b656e206d697373696e672066726f6d20696e7075740001e15335533533355301a1200135018501c2333573466e3cd40388888801000408007cc8cd54c068480048d400488008005401c407c4cd5ce2492a436f6e7472696220746f6b656e206d697373696e672066726f6d20636f6e7472616374206f75747075740001e1533553355335333573466e1cccc039401c048048d40048888801007c0784ccd5cd19b8733300e50073500d222220023500d22222001350012222200301f01e101e101f1335738921264f75747075742056616c7565206d757374206d617463682050726f6a65637444657461696c730001e153355335333573466e1cccc0394008048048cdc099980728020090091a8009111100200f80f080f899ab9c4901255472656173757279206d757374206b6565702072656d61696e696e67206c6f76656c6163650001e153355335333573466e1cccc0394008d403488888008d403488888004cdc099980728021a806911110011a806911110009a8009111100180f80f080f899ab9c4901235472656173757279206d757374206b6565702072656d61696e696e6720746f6b656e730001e15335533533355301a1200135018501c2333573466e3cd40088888800400408007cd402c88008407c4cd5ce2481184e6f7420612076616c69642050726f6a65637420686173680001e153355335323253335002153335001102121021210212153335002102121333573466ebc00800408c08884088854ccd400840848408884cc084008004d540108888008d540148888008407c4cd5ce24811b496e20616e64206f757420646174756d206d757374206d617463680001e1533553335355335300c35500822222222222200a130224988854cd40044008884c0992622220021326320243357389211077726f6e6720646174756d20747970650002821333573466ebc004d400888888cdd2a400066ae80dd480299aba0375000866ae80dd400199aba0375000466ae80dd48009bb102902001f213263202533573892011077726f6e6720646174756d207479706500029101f133573892012652656465656d657220616e6420657363726f7720646174756d206e6f74207468652073616d650001e101e101e101e101e101e101e101e153353335530191200135017501b2333573466e3cd40348888801400407c079401440784cd5ce24811f4f6e6c79204973737565722063616e206368616e67652054726561737572790001d13550012222003153355335300d0062135001223500122223500d22350022222222222223335530271200122350022222533533029018004133503c0060051005503700a1326320213357389201024c66000251301e4988854cd40044008884c089261355001222200315335300b00421350012200113263201f33573892116747265617375727920696e707574206d697373696e67000231335530131200123500122002355002222222222222333553020120013350215019502b2350012235001222200300c133355300e12001500c501e33553008120012350012200132323500122222222222233355301c12001223500222223500422335002200825335333573466e3c00405c0bc0b84cd40d0cd540d8014018020402140b00294008d40188888800c4d400488008c8004d54074894cd40045406c8854cd4cc024d40088888010cc8848cc00400c008c8488c00400cd40148888800d407c4cd4070008c0100044c010004888c8c8c004014c8004d5407c88cd400520002235002225335333573466e3c00802406c0684c01c0044c01800cc8004d5407888cd400520002235002225335333573466e3c00801c06806440044c01800cc8004d540688844894cd400454068884cd406cc010008cd54c018480040100048d400488d4008888888888888cccd40349409c9409c9409c8ccd54c06848004cd406c894cd40088400c4005409c8d4004894cd54cd4ccd5cd19b8f350022200235004220020220211333573466e1cd400888004d40108800408808440844488c008014540a803488d400888d400c88c8cd40148cd401094cd4ccd5cd19b8f00200101701615003101620162335004201625335333573466e3c00800405c0585400c405854cd400c854cd400884cd40088cd40088cd40088cd40088cc06000800480648cd400880648cc060008004888064888cd401080648894cd4ccd5cd19b8700600301c01b15335333573466e1c01400807006c4ccd5cd19b8700400101c01b101b101b1014153350012101410144890012233553008120012350012233550180023355300b1200123500122335501b00233350012330164800000488cc05c0080048cc05800520000013355300812001235001223355018002333500123355300c1200123500122335501c00235500d0010012233355500801100200123355300c1200123500122335501c00235500c00100133355500300c002001111222333553004120015013335530081200123500122335501800235500900133355300412001223500222533533355300d120013500b500f235001223300a00200500610031335017004003501400133553008120012350012232335501900330010053200135501b225335001135500a003221350022253353300c002008112223300200a0041300600300232001355014221122253350011002221330050023335530071200100500400111212223003004112122230010041233500422333500322002002001350012200132001355010221122533500115010221335011300400233553006120010040013200135500f22112225335001135003220012213335005220023004002333553007120010050040011221233001003002112330012253350021006100100322333573466e3c00800401000c48800848800488cdc000100091931900219ab9c49012465787065637465642065786163746c79206f6e65207472656173757279206f75747075740000823263200333573892012265787065637465642065786163746c79206f6e6520657363726f77206f7574707574000074984488008488488cc00401000c448848cc00400c008448800448004448c8c00400488cc00cc008008004cd4488ccccc00922011c94784b7e88ae2a6732dc5c0f41b3151e5f9719ea513f19cdb9aecfb30048811c738ec2c17e3319fa3e3721dbd99f0b31fce1b8006bb57fbd635e37840048811cff755aae04ae491988ade77580fc0044129585f60b3de9fea0e44bd80048811cfb45417ab92a155da3b31a8928c873eb9fd36c62184c736f189d334c004881077447696d62616c00222221233333001006005004003002200101",
                        "serialised_size": 4639,
                        "datum": {
                            "hash": "93892d0c469bd1228f0e94621d3101e755523e97ea0a837c9b509b1aeb9d8c42"
                        }
                    }
                },
                {
                    "address": "addr_test1qqe5wnjzkhrgfvntj3dndzml7003h0n5ezen924qjrrglv6648u33jzvq2msza6gyqdcnau0njhav2sv46adkc9c8wdqx5aas8",
                    "hash": "8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262",
                    "index": 2,
                    "value": 22920580,
                    "has_script": false,
                    "assets": [],
                    "reference_script": {
                        "type": "plutusV2",
                        "hash": "ff755aae04ae491988ade77580fc0044129585f60b3de9fea0e44bd8",
                        "code": "5913d50100003323232323232323232323232323322323232323222323232323223223232533533300c3333573466e1cd55cea8052400046464646464246666600200c00a0080060046eb8d5d09aba2500b375a6ae854028dd69aba1500a375a6ae854028dd71aba1500a23263201f33573804003e03a6666ae68cdc3a802240084244400246666ae68cdc3a802a40044244400446666ae68cdc3a8032400042444006464c6404266ae7008808407c078074cccd5cd19b8735573aa0049000119910919800801801191919191919191919191919191999ab9a3370e6aae754031200023333333333332222222222221233333333333300100d00c00b00a00900800700600500400300233501c01d35742a01866a03803a6ae85402ccd4070078d5d0a805199aa8103ae501f35742a012666aa040eb9407cd5d0a80419a80e0139aba150073335502002875a6ae854018c8c8c8cccd5cd19b8735573aa00490001199109198008018011919191999ab9a3370e6aae754009200023322123300100300233503275a6ae854008c0ccd5d09aba2500223263203533573806c06a06626aae7940044dd50009aba150023232323333573466e1cd55cea8012400046644246600200600466a064eb4d5d0a80118199aba135744a004464c6406a66ae700d80d40cc4d55cf280089baa001357426ae8940088c98c80c4cd5ce01901881789aab9e5001137540026ae854014cd4071d71aba1500433355020024200135742a006666aa040eb88004d5d0a80118131aba135744a004464c6405a66ae700b80b40ac4d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135573ca00226ea8004d5d0a801180b1aba135744a004464c6403e66ae7008007c07440784c98c8078cd5ce2481035054350001e135573ca00226ea80044d55ce9baa001135744a00226ae8940044d5d1280089aab9e5001137540022464460046eb0004c8004d5405088cccd55cf80092805119a80498021aba1002300335744004028464646666ae68cdc39aab9d5002480008cc8848cc00400c008c030d5d0a80118029aba135744a004464c6402866ae700540500484d55cf280089baa0012323232323333573466e1cd55cea8022400046666444424666600200a0080060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008c054d5d0a80119a80780a1aba135744a004464c6403266ae7006806405c4d55cf280089baa00135742a008666aa010eb9401cd5d0a8019919191999ab9a3370ea0029002119091118010021aba135573ca00646666ae68cdc3a80124004464244460020086eb8d5d09aab9e500423333573466e1d400d20002122200323263201b33573803803603203002e26aae7540044dd50009aba1500233500b75c6ae84d5d1280111931900a99ab9c016015013135744a00226ae8940044d55cf280089baa0011335500175ceb44488c88c008dd5800990009aa80891191999aab9f00225008233500733221233001003002300635573aa004600a6aae794008c010d5d100180909aba100111220021221223300100400312232323333573466e1d4005200023212230020033005357426aae79400c8cccd5cd19b8750024800884880048c98c8040cd5ce00880800700689aab9d500113754002464646666ae68cdc3a800a400c46424444600800a600e6ae84d55cf280191999ab9a3370ea004900211909111180100298049aba135573ca00846666ae68cdc3a801a400446424444600200a600e6ae84d55cf280291999ab9a3370ea00890001190911118018029bae357426aae7940188c98c8040cd5ce00880800700680600589aab9d500113754002464646666ae68cdc39aab9d5002480008cc8848cc00400c008c014d5d0a8011bad357426ae8940088c98c8030cd5ce00680600509aab9e5001137540024646666ae68cdc39aab9d5001480008dd71aba135573ca004464c6401466ae7002c0280204dd5000919191919191999ab9a3370ea002900610911111100191999ab9a3370ea004900510911111100211999ab9a3370ea00690041199109111111198008048041bae35742a00a6eb4d5d09aba2500523333573466e1d40112006233221222222233002009008375c6ae85401cdd71aba135744a00e46666ae68cdc3a802a400846644244444446600c01201060186ae854024dd71aba135744a01246666ae68cdc3a8032400446424444444600e010601a6ae84d55cf280591999ab9a3370ea00e900011909111111180280418071aba135573ca018464c6402666ae7005004c04404003c03803403002c4d55cea80209aab9e5003135573ca00426aae7940044dd50009191919191999ab9a3370ea002900111999110911998008028020019bad35742a0086eb4d5d0a8019bad357426ae89400c8cccd5cd19b875002480008c8488c00800cc020d5d09aab9e500623263200c33573801a01801401226aae75400c4d5d1280089aab9e500113754002464646666ae68cdc3a800a400446424460020066eb8d5d09aab9e500323333573466e1d400920002321223002003375c6ae84d55cf280211931900499ab9c00a009007006135573aa00226ea8004488c8c8cccd5cd19b87500148010848880048cccd5cd19b875002480088c84888c00c010c018d5d09aab9e500423333573466e1d400d20002122200223263200a33573801601401000e00c26aae7540044dd50009191999ab9a3370ea0029001109100111999ab9a3370ea0049000109100091931900319ab9c007006004003135573a6ea80052612001490103505431001123230010012233003300200200133232332232332232323232323322323232323232332232323233322232323232323222223232323232533350071533553355003101f13357389201264f6e6c79204973737565722063616e2043616e63656c20436f6d6d69746d656e74205554784f0001e15335323232350022235002223500522350022253335333501900b00600215335001153350051333501800b00300710291333501800b00300710291333501800b0030073550072222222222220053212330010021233001122200102332123300100202232122230030043500922222002123333333300100c225335333573466e1c008004088084405454cd4ccd5cd19b890020010220211013101422333573466e2000800408808488ccd5cd19b8900200102202122333573466e2400800408408888ccd5cd19b88002001021022225335333573466e2400800408808440044008894cd4ccd5cd19b8900200102202110021001101f13357389212943616e206f6e6c792063616e63656c20436f6d6d69746d656e7420616674657220646561646c696e650001e101e1533553355003101f13357389212e497373756572206d757374207369676e20746f206469737472696275746520436f6d6d69746d656e74205554784f0001e153355335333573466e20ccc0294010d40248888010d4024888800cd40208888800c07807c4ccd5cd19b8833300a500400c00c350082222200401e01f101e101f13357389212b436f6e7472696275746f72206d75737420726563656976652066756c6c20657363726f772076616c7565730001e101e1533553355003101f1335738921264f6e6c79204973737565722063616e2055706461746520436f6d6d69746d656e74205554784f0001e1533553355335333573466e1cccc028d54008888800cd40248888010d4024888800cd540048888800c07c0784ccd5cd19b8733300a355002222200300c00c3550012222200401f01e101e101f1335738921294f7574707574205554584f2076616c7565206d7573742062652067657120646174756d2073706563730001e153355335333573466e3cd5400488888004d40208888800407c07854cd4ccd5cd19b8f35500122222005350082222200501f01e15335333573466e20d5400488888010d40208888801007807c54cd4ccd5cd19b8835500122222003350082222200301e01f1333573466e20d5400488888008d40208888800807807c4078407840784078407c4cd5ce249296f6e6c792061646120616e642067696d62616c20616d6f756e742063616e206265206368616e6765640001e101e101e1533353550012222002132632024335738921136e6f7420616e20696e6c696e6520646174756d000292323232323232153353333333574800e46666ae68cdc39aab9d5007480008cccd55cfa8039281891999aab9f500725032233335573ea00e4a06646666aae7d401c940d08cccd55cfa8039281a91999aab9f35744a0104a66a605e6ae854034854cd4c0bcd5d0a80690a99a98181aba1500d215335303135742a01a42a66a60666ae85403484d40f048ccccc00401801401000c008540e8540e4540e0540dc540d8940d80dc0d80d40d00cc0c8940c00ac940bc940bc940bc940bc0c0840044c98c80accd5ce248114646174756d206861732077726f6e67207479706500030135744a00226ae8940044d5d1280089aba25001135573ca00226ea800484c98c8094cd5ce2481136e6f7420616e20696e6c696e6520646174756d0002a1533553353500422350022222222222223333500d25035250352503523335530271200133502822533500221003100150352350012253355335333573466e3cd400888008d4010880080bc0b84ccd5cd19b873500222001350042200102f02e102e1350390031503800d2135001223500122223500b2235002222222222222333553028120012235002222253353501822350062232335005233500425335333573466e3c0080040fc0f85400c40f880f88cd401080f894cd4ccd5cd19b8f00200103f03e15003103e153350032153350022133500223350022335002233500223304000200120412335002204123304000200122204122233500420412225335333573466e1c01800c11010c54cd4ccd5cd19b8700500204404313303000400110431043103c153350012103c103c133503e0060051005503900a1326320233357389201024c6600028130214988854cd40044008884c095261333553017120013501550192333573466e3cd401c8888004004074070cd54c058480048d400488008d54008888888888888ccd54c08c48004cd4091407140bc8d400488d4004888800c0304ccd54c04448005403d4088c8c8d4004888888888888ccd54c07c4800488d40088888d401088cd400894cd4ccd5cd19b8f017001032031133503800600810082008503000a50023500422222005135001220022223232300100532001355025223350014800088d4008894cd4ccd5cd19b8f00200901f01e130070011300600332001355024223350014800088d4008894cd4ccd5cd19b8f00200701e01d10011300600322333573466e1c0080040580552210012223500222350032253335333500800700400215335003100110191018101912223232323253335006215333500621533350082130044984c00d261533350072130044984c00d26100d100b1533350072130044984c00d261533350062130044984c00d26100c1533350052100a100b100915333500521533350072130054984c011261533350062130054984c01126100c100a1533350062130054984c011261533350052130054984c01126100b2533350052153335007215333500721333500b00a002001161616100b153335006215333500621333500a009002001161616100a10092533350042153335006215333500621333500a009002001161616100a15333500521533350052133350090080020011616161009100825333500321533350052153335005213335009008002001161616100915333500421533350042133350080070020011616161008100725333500221533350042153335004213335008007002001161616100815333500321533350032133350070060020011616161007100612350012222222200712220031222002122200112233553008120012350012233550190023355300b1200123500122335501c00233350012330184800000488cc0640080048cc06000520000013355300812001235001223355019002333500123355300c1200123500122335501d00235500d0010012233355500801100200123355300c1200123500122335501d00235500c00100133355500300c002001111222333553004120015014335530081200123500122335501900235500900133355300412001223500222533533355300d120013500b500f235001223300a00200500610031335018004003501500133553008120012350012232335501a00330010053200135501d225335001135500a003221350022253353300c002008112223300200a0041300600300232001355016221122253350011002221330050023335530071200100500400111212223003004112122230010041233500422333500322002002001350012200132001355012221122533500115011221335012300400233553006120010040013200135501122112225335001135003220012213335005220023004002333553007120010050040011221233001003002112330012253350021006100100322333573466e3c00800401000c4880084880048ccccccd5d200092805128051280511a8059bad0022500a00b2333333357480024a0124a0124a0124a01246a0146eb800802888cdc000100091931900199ab9c49011b65786163746c79206f6e65206f7574707574206578706563746564000084984488008488488cc00401000c448848cc00400c00848488c00800c448800448004448c8c00400488cc00cc008008004cd4488cccc0092211cfb45417ab92a155da3b31a8928c873eb9fd36c62184c736f189d334c004881077447696d62616c0048811c738ec2c17e3319fa3e3721dbd99f0b31fce1b8006bb57fbd635e37840048811c94784b7e88ae2a6732dc5c0f41b3151e5f9719ea513f19cdb9aecfb300222212333300100500400300220011",
                        "serialised_size": 5080
                    }
                },
                {
                    "address": "addr_test1qqe5wnjzkhrgfvntj3dndzml7003h0n5ezen924qjrrglv6648u33jzvq2msza6gyqdcnau0njhav2sv46adkc9c8wdqx5aas8",
                    "hash": "8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262",
                    "index": 1,
                    "value": 21019870,
                    "has_script": false,
                    "assets": [],
                    "reference_script": {
                        "type": "plutusV2",
                        "hash": "46789edad6bb61c434b1d69c353998fe20f320548fe587c2b1b5bb9c",
                        "code": "59121c010000332332232323232323232323232323232323232322232322323223232533533300a3333573466e1cd55cea804240004646424660020060046eb8d5d09aba2500933500c75c6ae8540208c98c806ccd5ce00e00d80c9999ab9a3370ea0089001109100091999ab9a3370ea00a900011909118010019919191919191999ab9a3370e6aae7540152000232323232321233333001006005004003002375c6ae84d5d128031bad35742a00a6eb4d5d0a8029bad35742a00a6eb8d5d0a80291931901199ab9c024023021135744a00226ae8940044d5d1280089aab9e5001137540026ae84d55cf280391931900e19ab9c01d01c01a0193333573466e1cd55cea80124000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd406806cd5d0a80619a80d00d9aba1500b33501a01c35742a014666aa03ceb94074d5d0a804999aa80f3ae501d35742a01066a0340466ae85401cccd54078091d69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40b9d69aba15002302f357426ae8940088c98c80c4cd5ce01901881789aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a8173ad35742a004605e6ae84d5d1280111931901899ab9c03203102f135573ca00226ea8004d5d09aba2500223263202d33573805c05a05626aae7940044dd50009aba1500533501a75c6ae854010ccd540780808004d5d0a801999aa80f3ae200135742a00460446ae84d5d1280111931901499ab9c02a029027135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a00460246ae84d5d1280111931900d99ab9c01c01b019101a13263201a335738921035054350001a135573ca00226ea80044d55cea80089baa001135573ca00226ea800448c88c008dd6000990009aa80a111999aab9f00125016233501530043574200460066ae880080488c8c8cccd5cd19b8735573aa004900011991091980080180118051aba150023005357426ae8940088c98c8048cd5ce00980900809aab9e5001137540024646464646666ae68cdc39aab9d5004480008cccc888848cccc00401401000c008c8c8c8cccd5cd19b8735573aa004900011991091980080180118099aba1500233500d012357426ae8940088c98c805ccd5ce00c00b80a89aab9e5001137540026ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6403266ae7006806405c0580544d55cea80089baa00135742a00466a012eb8d5d09aba2500223263201333573802802602226ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab00132001355011223233335573e0044a028466a02666442466002006004600c6aae754008c014d55cf280118021aba200301013574200224464646666ae68cdc3a800a40004642446004006600a6ae84d55cf280191999ab9a3370ea0049001109100091931900819ab9c01101000e00d135573aa00226ea80048c8c8cccd5cd19b875001480188c848888c010014c01cd5d09aab9e500323333573466e1d400920042321222230020053009357426aae7940108cccd5cd19b875003480088c848888c004014c01cd5d09aab9e500523333573466e1d40112000232122223003005375c6ae84d55cf280311931900819ab9c01101000e00d00c00b135573aa00226ea80048c8c8cccd5cd19b8735573aa004900011991091980080180118029aba15002375a6ae84d5d1280111931900619ab9c00d00c00a135573ca00226ea80048c8cccd5cd19b8735573aa002900011bae357426aae7940088c98c8028cd5ce00580500409baa001232323232323333573466e1d4005200c21222222200323333573466e1d4009200a21222222200423333573466e1d400d2008233221222222233001009008375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c4664424444444660040120106eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc8848888888cc018024020c030d5d0a8049bae357426ae8940248cccd5cd19b875006480088c848888888c01c020c034d5d09aab9e500b23333573466e1d401d2000232122222223005008300e357426aae7940308c98c804ccd5ce00a00980880800780700680600589aab9d5004135573ca00626aae7940084d55cf280089baa0012323232323333573466e1d400520022333222122333001005004003375a6ae854010dd69aba15003375a6ae84d5d1280191999ab9a3370ea0049000119091180100198041aba135573ca00c464c6401866ae700340300280244d55cea80189aba25001135573ca00226ea80048c8c8cccd5cd19b875001480088c8488c00400cdd71aba135573ca00646666ae68cdc3a8012400046424460040066eb8d5d09aab9e500423263200933573801401200e00c26aae7540044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c6401466ae7002c02802001c0184d55cea80089baa0012323333573466e1d40052002212200223333573466e1d40092000212200123263200633573800e00c00800626aae74dd5000a4c240029201035054310011220021221223300100400311232300100122330033002002001332323232332232323232332232323232323233223232323232323232232222323232323232325335009215335533533355301a1200135018501c2333573466e3cd40388888801000408007d4018407c4cd5ce24920436f6e7472696220746f6b656e206d697373696e672066726f6d20696e7075740001e15335533533355301a1200135018501c2333573466e3cd40388888801000408007cc8cd54c068480048d400488008005401c407c4cd5ce2492a436f6e7472696220746f6b656e206d697373696e672066726f6d20636f6e7472616374206f75747075740001e1533553355335333573466e1cccc039401c048048d40048888801007c0784ccd5cd19b8733300e50073500d222220023500d22222001350012222200301f01e101e101f1335738921264f75747075742056616c7565206d757374206d617463682050726f6a65637444657461696c730001e153355335333573466e1cccc0394008048048cdc099980728020090091a8009111100200f80f080f899ab9c4901255472656173757279206d757374206b6565702072656d61696e696e67206c6f76656c6163650001e153355335333573466e1cccc0394008d403488888008d403488888004cdc099980728021a806911110011a806911110009a8009111100180f80f080f899ab9c4901235472656173757279206d757374206b6565702072656d61696e696e6720746f6b656e730001e15335533533355301a1200135018501c2333573466e3cd40088888800400408007cd402c88008407c4cd5ce2481184e6f7420612076616c69642050726f6a65637420686173680001e153355335323253335002153335001102121021210212153335002102121333573466ebc00800408c08884088854ccd400840848408884cc084008004d540108888008d540148888008407c4cd5ce24811b496e20616e64206f757420646174756d206d757374206d617463680001e1533553335355335300c35500822222222222200a130224988854cd40044008884c0992622220021326320243357389211077726f6e6720646174756d20747970650002821333573466ebc004d400888888cdd2a400066ae80dd480299aba0375000866ae80dd400199aba0375000466ae80dd48009bb102902001f213263202533573892011077726f6e6720646174756d207479706500029101f133573892012652656465656d657220616e6420657363726f7720646174756d206e6f74207468652073616d650001e101e101e101e101e101e101e101e153353335530191200135017501b2333573466e3cd40348888801400407c079401440784cd5ce24811f4f6e6c79204973737565722063616e206368616e67652054726561737572790001d13550012222003153355335300d0062135001223500122223500d22350022222222222223335530271200122350022222533533029018004133503c0060051005503700a1326320213357389201024c66000251301e4988854cd40044008884c089261355001222200315335300b00421350012200113263201f33573892116747265617375727920696e707574206d697373696e67000231335530131200123500122002355002222222222222333553020120013350215019502b2350012235001222200300c133355300e12001500c501e33553008120012350012200132323500122222222222233355301c12001223500222223500422335002200825335333573466e3c00405c0bc0b84cd40d0cd540d8014018020402140b00294008d40188888800c4d400488008c8004d54074894cd40045406c8854cd4cc024d40088888010cc8848cc00400c008c8488c00400cd40148888800d407c4cd4070008c0100044c010004888c8c8c004014c8004d5407c88cd400520002235002225335333573466e3c00802406c0684c01c0044c01800cc8004d5407888cd400520002235002225335333573466e3c00801c06806440044c01800cc8004d540688844894cd400454068884cd406cc010008cd54c018480040100048d400488d4008888888888888cccd40349409c9409c9409c8ccd54c06848004cd406c894cd40088400c4005409c8d4004894cd54cd4ccd5cd19b8f350022200235004220020220211333573466e1cd400888004d40108800408808440844488c008014540a803488d400888d400c88c8cd40148cd401094cd4ccd5cd19b8f00200101701615003101620162335004201625335333573466e3c00800405c0585400c405854cd400c854cd400884cd40088cd40088cd40088cd40088cc06000800480648cd400880648cc060008004888064888cd401080648894cd4ccd5cd19b8700600301c01b15335333573466e1c01400807006c4ccd5cd19b8700400101c01b101b101b1014153350012101410144890012233553008120012350012233550180023355300b1200123500122335501b00233350012330164800000488cc05c0080048cc05800520000013355300812001235001223355018002333500123355300c1200123500122335501c00235500d0010012233355500801100200123355300c1200123500122335501c00235500c00100133355500300c002001111222333553004120015013335530081200123500122335501800235500900133355300412001223500222533533355300d120013500b500f235001223300a00200500610031335017004003501400133553008120012350012232335501900330010053200135501b225335001135500a003221350022253353300c002008112223300200a0041300600300232001355014221122253350011002221330050023335530071200100500400111212223003004112122230010041233500422333500322002002001350012200132001355010221122533500115010221335011300400233553006120010040013200135500f22112225335001135003220012213335005220023004002333553007120010050040011221233001003002112330012253350021006100100322333573466e3c00800401000c48800848800488cdc000100091931900219ab9c49012465787065637465642065786163746c79206f6e65207472656173757279206f75747075740000823263200333573892012265787065637465642065786163746c79206f6e6520657363726f77206f7574707574000074984488008488488cc00401000c448848cc00400c008448800448004448c8c00400488cc00cc008008004cd4488ccccc00922011c94784b7e88ae2a6732dc5c0f41b3151e5f9719ea513f19cdb9aecfb30048811c738ec2c17e3319fa3e3721dbd99f0b31fce1b8006bb57fbd635e37840048811cff755aae04ae491988ade77580fc0044129585f60b3de9fea0e44bd80048811cfb45417ab92a155da3b31a8928c873eb9fd36c62184c736f189d334c004881077447696d62616c00222221233333001006005004003002200101",
                        "serialised_size": 4639
                    }
                },
                {
                    "address": "addr_test1qpjjjht0at8ux0lq98630pthpkfrw05zeh3gc0xcc4dre5gp84zu07dh68eunt6qhczxps8xcvjh8kgsfudzx2x6429sg2ntsa",
                    "hash": "8502fe3617b70d12fc65c8c17dab8483f5a7f847e0fba0376fe7abacf4773262",
                    "index": 0,
                    "value": 275924604,
                    "has_script": false,
                    "assets": []
                }
            ]
        }

        // act
        const response = await api.listTransactionUtxos(hash);

        // assert
        expect(response.result).deep.equal(utxos);
    })

    it('should list tx scripts', async () => {
        // arrange
        const hash = 'a6ea1b7f2c96db8f097534a17f45cfa8934c9e9d70a0737b0ad90d7549de2724';
        const scripts = [
            {
                "type": "plutusV2",
                "hash": "bfc22757138e22b5159ef2fa833520bf6f204df5f77c2fa90e7a1ae8",
                "code": "5910d6010000332332232323232323232323232323232323232322232322323223232533533300a3333573466e1cd55cea804240004646424660020060046eb8d5d09aba2500933500c75c6ae8540208c98c806ccd5ce00e00d80c9999ab9a3370ea0089001109100091999ab9a3370ea00a900011909118010019919191919191999ab9a3370e6aae7540152000232323232321233333001006005004003002375c6ae84d5d128031bad35742a00a6eb4d5d0a8029bad35742a00a6eb8d5d0a80291931901199ab9c024023021135744a00226ae8940044d5d1280089aab9e5001137540026ae84d55cf280391931900e19ab9c01d01c01a0193333573466e1cd55cea80124000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd406806cd5d0a80619a80d00d9aba1500b33501a01c35742a014666aa03ceb94074d5d0a804999aa80f3ae501d35742a01066a0340466ae85401cccd54078091d69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40b9d69aba15002302f357426ae8940088c98c80c4cd5ce01901881789aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a8173ad35742a004605e6ae84d5d1280111931901899ab9c03203102f135573ca00226ea8004d5d09aba2500223263202d33573805c05a05626aae7940044dd50009aba1500533501a75c6ae854010ccd540780808004d5d0a801999aa80f3ae200135742a00460446ae84d5d1280111931901499ab9c02a029027135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a00460246ae84d5d1280111931900d99ab9c01c01b019101a13263201a335738921035054350001a135573ca00226ea80044d55cea80089baa001135573ca00226ea800448c88c008dd6000990009aa80a111999aab9f00125016233501530043574200460066ae880080488c8c8cccd5cd19b8735573aa004900011991091980080180118051aba150023005357426ae8940088c98c8048cd5ce00980900809aab9e5001137540024646464646666ae68cdc39aab9d5004480008cccc888848cccc00401401000c008c8c8c8cccd5cd19b8735573aa004900011991091980080180118099aba1500233500d012357426ae8940088c98c805ccd5ce00c00b80a89aab9e5001137540026ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6403266ae7006806405c0580544d55cea80089baa00135742a00466a012eb8d5d09aba2500223263201333573802802602226ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab00132001355011223233335573e0044a028466a02666442466002006004600c6aae754008c014d55cf280118021aba200301013574200224464646666ae68cdc3a800a40004642446004006600a6ae84d55cf280191999ab9a3370ea0049001109100091931900819ab9c01101000e00d135573aa00226ea80048c8c8cccd5cd19b875001480188c848888c010014c01cd5d09aab9e500323333573466e1d400920042321222230020053009357426aae7940108cccd5cd19b875003480088c848888c004014c01cd5d09aab9e500523333573466e1d40112000232122223003005375c6ae84d55cf280311931900819ab9c01101000e00d00c00b135573aa00226ea80048c8c8cccd5cd19b8735573aa004900011991091980080180118029aba15002375a6ae84d5d1280111931900619ab9c00d00c00a135573ca00226ea80048c8cccd5cd19b8735573aa002900011bae357426aae7940088c98c8028cd5ce00580500409baa001232323232323333573466e1d4005200c21222222200323333573466e1d4009200a21222222200423333573466e1d400d2008233221222222233001009008375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c4664424444444660040120106eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc8848888888cc018024020c030d5d0a8049bae357426ae8940248cccd5cd19b875006480088c848888888c01c020c034d5d09aab9e500b23333573466e1d401d2000232122222223005008300e357426aae7940308c98c804ccd5ce00a00980880800780700680600589aab9d5004135573ca00626aae7940084d55cf280089baa0012323232323333573466e1d400520022333222122333001005004003375a6ae854010dd69aba15003375a6ae84d5d1280191999ab9a3370ea0049000119091180100198041aba135573ca00c464c6401866ae700340300280244d55cea80189aba25001135573ca00226ea80048c8c8cccd5cd19b875001480088c8488c00400cdd71aba135573ca00646666ae68cdc3a8012400046424460040066eb8d5d09aab9e500423263200933573801401200e00c26aae7540044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c6401466ae7002c02802001c0184d55cea80089baa0012323333573466e1d40052002212200223333573466e1d40092000212200123263200633573800e00c00800626aae74dd5000a4c24002920103505431001122002122122330010040031123230010012233003300200200133232323233223232323322323232323232332232323232323232222232323232323232533500921533553353335530181200135016501a2333573466e3cd403488888010004078075401840744cd5ce2491f41636365737320746f6b656e206d697373696e672066726f6d20696e7075740001c1533553353335530181200135016501a2333573466e3cd403488888010004078074c8cd54c060480048d400488008005401c40744cd5ce2492941636365737320746f6b656e206d697373696e672066726f6d20636f6e7472616374206f75747075740001c1533553355335333573466e1cccc035401c040040d4004888880100740704ccd5cd19b8733300d50073500c222220023500c22222001350012222200301d01c101c101d1335738921254f75747075742056616c7565206d757374206d6174636820426f756e747944657461696c730001c153355335333573466e1cccc0354008040040cdc0999806a8020080081a8009111100200e80e080e899ab9c4901255472656173757279206d757374206b6565702072656d61696e696e67206c6f76656c6163650001c153355335333573466e1cccc0354008d403088888008d403088888004cdc0999806a8021a806111110011a806111110009a8009111100180e80e080e899ab9c4901235472656173757279206d757374206b6565702072656d61696e696e6720746f6b656e730001c1533553353335530181200135016501a2333573466e3cd400888888004004078074d402c8800840744cd5ce2481174e6f7420612076616c696420626f756e747920686173680001c15335323253335002153335001101f2101f2101f2153335002101f21333573466ebc00800408408084080854ccd4008407c8408084cc07c008004d540108888008d54014888800840744cd5ce24811b496e20616e64206f757420646174756d206d757374206d617463680001c101c101c101c101c101c101c15335333553017120013501550192333573466e3cd403088888014004074071401440704cd5ce24811f4f6e6c79204973737565722063616e206368616e67652054726561737572790001b13550012222003153355335300c0062135001223500122223500d2235002222222222222333553025120012235002222253353501822350062232335005233500425335333573466e3c0080040f00ec5400c40ec80ec8cd401080ec94cd4ccd5cd19b8f00200103c03b15003103b153350032153350022133500223350022335002233500223303d002001203e2335002203e23303d00200122203e222335004203e2225335333573466e1c01800c10410054cd4ccd5cd19b870050020410401333573466e1c0100041041004100410040e454cd4004840e440e44cd40e4018014401540d00284c98c8078cd5ce2481024c66000221301c4988854cd40044008884c081261355001222200315335300a00421350012200113263201c33573892116747265617375727920696e707574206d697373696e6700020133553011120012350012200235500222222222222233355301e1200133501f501750282350012235001222200300c133355300c12001500a501b33553007120012350012200132323500122222222222233355301a12001223500222223500422335002200825335333573466e3c00405c0b40b04cd40c4cd540cc014018020402140a40294008d40148888800c4d400488008888c8c8c004014c8004d5407488cd400520002235002225335333573466e3c0080240680644c01c0044c01800cc8004d5407088cd400520002235002225335333573466e3c00801c06406040044c01800cc8004d540608844894cd400454060884cd4064c010008cd54c018480040100048d400488d4008888888888888cccd40349409494094940948ccd54c06448004cd4068894cd40088400c400540948d4004894cd54cd4ccd5cd19b8f350022200235004220020210201333573466e1cd400888004d40108800408408040804488c008014540a003522010012233553008120012350012233550170023355300b1200123500122335501a00233350012330164800000488cc05c0080048cc05800520000013355300812001235001223355017002333500123355300c1200123500122335501b00235500d0010012233355500801100200123355300c1200123500122335501b00235500c00100133355500300c002001111222333553004120015012335530081200123500122335501700235500900133355300412001223500222533533355300d120013500b500f235001223300a00200500610031335016004003501300133553008120012350012232335501800330010053200135501a225335001135500a003221350022253353300c002008112223300200a004130060030023200135501322112225335001100222133005002333553007120010050040011121222300300411212223001004123350042233350032200200200135001220013200135500f22112253350011500f221335010300400233553006120010040013200135500e22112225335001135003220012213335005220023004002333553007120010050040011221233001003002112330012253350021006100100322333573466e3c00800401000c48800848800488cdc000100091931900199ab9c49012465787065637465642065786163746c79206f6e65207472656173757279206f7574707574000074984488008488488cc00401000c448848cc00400c008448800448004448c8c00400488cc00cc008008004cd4488ccccc00922011c94784b7e88ae2a6732dc5c0f41b3151e5f9719ea513f19cdb9aecfb30048811c738ec2c17e3319fa3e3721dbd99f0b31fce1b8006bb57fbd635e37840048811c98d2b58a4eff29e8e9f9d16fb2fb0ac4146d0b0772a417daab840a740048811cfb45417ab92a155da3b31a8928c873eb9fd36c62184c736f189d334c004881077447696d62616c00222221233333001006005004003002200101",
                "serialised_size": 4313,
                "datum": {
                    "hash": "93892d0c469bd1228f0e94621d3101e755523e97ea0a837c9b509b1aeb9d8c42",
                    "value": {
                        "fields": [
                            {
                                "list": [
                                    {
                                        "bytes": "464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e"
                                    },
                                    {
                                        "bytes": "a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a94"
                                    },
                                    {
                                        "bytes": "7b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab7"
                                    },
                                    {
                                        "bytes": "e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44"
                                    },
                                    {
                                        "bytes": "34adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3"
                                    }
                                ]
                            },
                            {
                                "bytes": "54726561737572794973737565726578616d706c65"
                            }
                        ],
                        "constructor": 0
                    },
                    "value_raw": "d8799f9f5820464a7376a01d7f8c58cf511285077e1b359fd6ff818f4375c9de1c2ec6fc1c2e5820a05f79c041e4b2238b5301c15a8e1083e56f3600bb2483245e7b3905e0870a9458207b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab75820e0174b7bf4c06b975825c36170494732f50de8a4d9c21d272211ffe605875a44582034adf47f2ac91dff05eee13a4b96d584eb6730d1392b24d0684ad0bfba0e89c3ff5554726561737572794973737565726578616d706c65ff"
                },
                "redeemer": {
                    "index": 1,
                    "unit_mem": 7000000,
                    "unit_steps": 3000000000,
                    "fee": 620200,
                    "purpose": "spend",
                    "script_hash": "bfc22757138e22b5159ef2fa833520bf6f204df5f77c2fa90e7a1ae8",
                    "data": {
                        "hash": "6f23143c96a4e002b474638cf0e0d0a5aa673aa5af13e7c7995fe061242e3f15",
                        "value": {
                            "fields": [
                                {
                                    "fields": [
                                        {
                                            "bytes": "957aaaf3b663749e6fa6d57137bddf03acb5206320a84c17df12c7e4"
                                        },
                                        {
                                            "int": 75000000
                                        },
                                        {
                                            "int": 1500
                                        },
                                        {
                                            "int": 1672573512255
                                        },
                                        {
                                            "bytes": "7b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab7"
                                        }
                                    ],
                                    "constructor": 0
                                }
                            ],
                            "constructor": 0
                        },
                        "value_raw": "d8799fd8799f581c957aaaf3b663749e6fa6d57137bddf03acb5206320a84c17df12c7e41a047868c01905dc1b000001856d266a3f58207b73c9c18235b9c8ff15ffe138173d555ff5cb1f7a9b4315a5fbbe57af20bab7ffff"
                    }
                }
            }
        ]

        // act
        const response = await api.listTransactionScripts(hash);

        // assert
        expect(response.result).deep.equal(scripts);
    })

    it('should list tx collaterals', async () => {
        // arrange
        const hash = 'a6ea1b7f2c96db8f097534a17f45cfa8934c9e9d70a0737b0ad90d7549de2724';
        const collaterals = {
            "hash": "a6ea1b7f2c96db8f097534a17f45cfa8934c9e9d70a0737b0ad90d7549de2724",
            "inputs": [
                {
                    "address": "addr_test1qz2h42hnke3hf8n05m2hzdaamup6edfqvvs2snqhmufv0eryqhtfq6cfwktmrdw79n2smpdd8n244z8x9f3267g8cz6s59993r",
                    "hash": "a3d820b9a49799f57079bc2dbe0a553eba03d81580873c5c137c210b9cbae75f",
                    "index": 2,
                    "value": 9200778,
                    "has_script": false,
                    "assets": []
                },
                {
                    "address": "addr_test1qzc68y4ucy4h00upxlxll8547p2c7w7f2ngun6hkym85ddmyqhtfq6cfwktmrdw79n2smpdd8n244z8x9f3267g8cz6sztf67n",
                    "hash": "b67cf1d82fcc5e202f67bb0499c6d2306d22553f681f8b4fb3f0766e215306bf",
                    "index": 0,
                    "value": 5000000,
                    "has_script": false,
                    "assets": []
                }
            ],
            "outputs": []
        }

        // act
        const response = await api.listTransactionCollaterals(hash);

        // assert
        expect(response.result).deep.equal(collaterals);
    })

    it('should list tx assets mint', async () => {
        // arrange
        const hash = 'f9887234a400f1ba8914d4ae9bddd8bf78d7f526fdf2f3d23e7fbc2c914e28c3';
        const mints = {
            "data": [
                {
                    "policy_id": "1bece8655d8512d33e5981b5056b21181c40c5da97a8d91d77400e38",
                    "asset_name": "tDYAD",
                    "fingerprint": "asset1jek0whxhggavh64yaucxxkcvd3cll2yc7p65s5",
                    "quantity": 5000,
                    "created_at": "2022-10-24T18:41:04.000Z"
                }
            ],
            "cursor": null
        }
        const size = 2;

        // act
        const response = await api.listTransactionMints(hash, size);

        // assert
        expect(response.result).deep.equal(mints);
    })
})