import * as chai from 'chai';
import * as chaiAsPromised from 'chai-as-promised';

chai.use(chaiAsPromised);
const expect = chai.expect;

import 'mocha';
import * as dotenv from "dotenv";
import { Tangocrypto, Network } from '../index';
import { AddressApi } from '../src/clients/address';

dotenv.config();
describe('Address API endpoints', function () {
    this.timeout(0);
    let api: AddressApi;

    before('Initializing API ...', () => {

        api = new Tangocrypto({
            apiKey: process.env.API_KEY!,
            appId: process.env.APP_ID!,
            network: Network.CARDANO_TESTNET_STAGING,
            version: process.env.VERSION
        }).address();
    })

    it('should get address summary', async () => {
        // arrange
        const address = 'addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw';
        const summary = {
            "network": "testnet",
            "address": "addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw",
            "stake_address": "stake_test1uq6zmtyljhhylyjk0ajj5umdvjl6pta29knethdgmejctqqr6tflc",
            "balance": 23703680,
            "transactions_count": 33
        }

        // act
        const response = await api.getAddressSummary(address);

        // assert
        expect(response.result).deep.equal(summary);
    })

    it('should list address utxos', async () => {
        // arrange
        const address = 'addr_test1qpemm54tmynjhuyw0qhzdpnras29c3pc8gxvc4afpsa3uwglmrag6mlare663x64ugkkv8nqhqg3z6u78xa49fq6wmts55h5y9';

        // act
        const response = await api.listAddressUtxos(address)

        // assert
        expect(response.result.data).instanceOf(Array);
    })
    
    it('should list address transactions', async () => {
        // arrange
        const address = 'addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw';
        const size = 5;
        const result = {
            "data": [
                {
                    "hash": "0dc88eb6b35a8e93bd6490509f10684a18111de7b5f354034ea985e04199e0c7",
                    "block_index": null,
                    "out_sum": 3005899,
                    "fee": 194101,
                    "deposit": null,
                    "size": null,
                    "script_size": null,
                    "block": {
                        "epoch_no": 153,
                        "slot_no": null,
                        "epoch_slot_no": 359309,
                        "block_no": 2875591,
                        "time": "2021-09-01T00:08:45.000Z"
                    },
                    "inputs": [
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7",
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7"
                    ],
                    "outputs": [
                        "addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw",
                        "addr_test1qrd6wgfjrfxge23f47hmxe9fr3swevgg2ygxtpnax0s4gp359kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqr26suf"
                    ]
                },
                {
                    "hash": "de880f1499cfaaf5a46a3a20d62333745e7140e9edb14722e6e42a3f5f58e0a6",
                    "block_index": null,
                    "out_sum": 2799607,
                    "fee": 200393,
                    "deposit": null,
                    "size": null,
                    "script_size": null,
                    "block": {
                        "epoch_no": 153,
                        "slot_no": null,
                        "epoch_slot_no": 359034,
                        "block_no": 2875584,
                        "time": "2021-09-01T00:04:10.000Z"
                    },
                    "inputs": [
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7",
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7",
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7"
                    ],
                    "outputs": [
                        "addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw",
                        "addr_test1qqj2mlavqe8zhjj24x55xa2z4tlmcjz4sdw6x73g72ux0je59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqzmaq0h"
                    ]
                },
                {
                    "hash": "a48ae9b80ddc0384f31f1969e04b42e59a2dc617b642b76cbc9918cb077932f9",
                    "block_index": null,
                    "out_sum": 4007059,
                    "fee": 199953,
                    "deposit": null,
                    "size": null,
                    "script_size": null,
                    "block": {
                        "epoch_no": 152,
                        "slot_no": null,
                        "epoch_slot_no": 173336,
                        "block_no": 2857031,
                        "time": "2021-08-24T20:29:12.000Z"
                    },
                    "inputs": [
                        "addr_test1qqwvdnlfuar8hdmk5xapw5a9t8cpzd8mcws9vm29uy8lche59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqrum9rj",
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7",
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7"
                    ],
                    "outputs": [
                        "addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw",
                        "addr_test1qps9ef9w52vpc8waex4l0fxrejkepdfq0stt60e8pc76tc359kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq0fcf7f"
                    ]
                },
                {
                    "hash": "0fc088b30dc39f97a52f50b15835bd4c486b0db304c4d7fae6ffd4861657f41c",
                    "block_index": null,
                    "out_sum": 2801455,
                    "fee": 198545,
                    "deposit": null,
                    "size": null,
                    "script_size": null,
                    "block": {
                        "epoch_no": 150,
                        "slot_no": null,
                        "epoch_slot_no": 407082,
                        "block_no": 2839102,
                        "time": "2021-08-17T13:24:58.000Z"
                    },
                    "inputs": [
                        "addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw",
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7",
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7"
                    ],
                    "outputs": [
                        "addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw",
                        "addr_test1qqwvdnlfuar8hdmk5xapw5a9t8cpzd8mcws9vm29uy8lche59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqrum9rj"
                    ]
                },
                {
                    "hash": "b2ef8406abed4ac2b2e966a6af47b57f2c178d59048e37d133c11db56a4850c4",
                    "block_index": null,
                    "out_sum": 11185160,
                    "fee": 215749,
                    "deposit": null,
                    "size": null,
                    "script_size": null,
                    "block": {
                        "epoch_no": 143,
                        "slot_no": null,
                        "epoch_slot_no": 331830,
                        "block_no": 2748082,
                        "time": "2021-07-12T16:30:46.000Z"
                    },
                    "inputs": [
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7",
                        "addr_test1qrk57z5yswuacq3ejn3egy3gjy47rxuqwnrduslkvaflr7359kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq0mzz3s",
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7",
                        "addr_test1qq8l3373hjyp59yzluyk4rv4uujj3078v67mg7wlgm4p4ve59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqqnz3q7",
                        "addr_test1qqlmwmdsm4gewyzlx42v4m89lyj45vp8tsmpps6cckukzdp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqj3qpt8",
                        "addr_test1qqmckl28apex3qd7vhn44f838ehkqu5m8gl22q67qmdu03359kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq4hzakt",
                        "addr_test1qrdlhf9hfr7tr9fc62fdy2uax8k4m75dpyuc0khxg44qyee59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqqr0tl6d",
                        "addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw"
                    ],
                    "outputs": [
                        "addr_test1vq2w5q94jn5rktlh85yr2px4f8tkp0zjrtfdakhtwcg66lgzd8ua7",
                        "addr_test1qppx2nzkv29whz8ask8hpyfz4k0cjd0l5062jq0awl2u3xp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq66aufl"
                    ]
                }
            ],
            "cursor": "d871e357acda"
        }

        // act
        const response = await api.listAddressTransactions(address, size);

        // assert
        expect(response.result).deep.equal(result);
    })

    it('should list address assets', async () => {
        // arrange
        const address = 'addr_test1qquxc75xmzzy7sy955pyz4tqg0ycgttjcv2u39ay929q2yp59kkfl90wf7f9vlm99fek6e9l5zh65td8jhw63hn9skqq8thxnw';
        const size = 2;
        const result = {
            "data": [
                {
                    "policy_id": "4d4094abf29279e3d5f4d3bfabe439b0916a27afb67e1a736cfe8f6f",
                    "asset_name": "27206f7220313d31202d2d202d",
                    "fingerprint": "asset1yqgz6xrqedspzlxw9y82urs84unl57c6rtvuee",
                    "quantity": 1
                },
                {
                    "policy_id": "57c0d81628dd68f8b3ab3074ce40faf2aba96e96d63dbcf174644f36",
                    "asset_name": "111",
                    "fingerprint": "asset1yceuuzc7utvjgct2epnrzqp290ah4jfvyxc7um",
                    "quantity": 10
                }
            ],
            "cursor": "8d37a507ead22e8e8a0d2a3c4c2dd33f6cd0cb990b2494f7f841aee3bba2303d126a51bcfa5ee52843016551"
        }

        // act
        const response = await api.listAddressAssets(address, size);

        // assert
        expect(response.result).deep.equal(result);
    })

    it('should list address asset utxos', async () => {
        // arrange
        const address = 'addr_test1wrhtrx98lc6dc2zk0uuv0hjjcrffq5fvllq9k7u6cajfvhq0rqywz';
        const asset = 'asset1r5mrxn5377473gus6jzq3n947j33flenl4qptm';
        const size = 2;
        const result = {
            "data": [
                {
                    "address": "addr_test1wrhtrx98lc6dc2zk0uuv0hjjcrffq5fvllq9k7u6cajfvhq0rqywz",
                    "hash": "9dd3f46919ef494dd7368bb42f732a77b20a64a088209391c3d4501624d23ba2",
                    "index": 1,
                    "value": 1689618,
                    "has_script": true,
                    "assets": [
                        {
                            "policy_id": "406c221cad25b6832609bc24f649840763fae659cafa3472f26122ab",
                            "asset_name": "F",
                            "fingerprint": "asset1r5mrxn5377473gus6jzq3n947j33flenl4qptm",
                            "quantity": 1
                        }
                    ],
                    "script": {
                        "type": "plutusV1",
                        "hash": "eeb198a7fe34dc28567f38c7de52c0d290512cffc05b7b9ac764965c",
                        "code": "5917c35917c001000033233223322332233223232333222323332223233333333222222223233322232333322223232332232333222323332223232332233223232333332222233223322332233223322332222323223223232533530343330093333573466e1cd55cea803a400046644660a80040026eb8d5d0a8039bae357426ae89401c8d4128d4c12ccd5ce249035054310004c499263333573466e1cd55cea8022400046464646666ae68cdc39aab9d5002480008cc88cc150008004ccd54135d73ae35742a004666aa09aeb9d71aba135744a00446a09c6a609e66ae712401035054310005049926135573ca00226ea8004d5d09aab9e500523504a35304b335738921035054310004c499263333573466e1cd55cea8012400046601864646464646464646464646666ae68cdc39aab9d500a480008cccccccccc068cd40a08c8c8cccd5cd19b8735573aa0049000119810181d9aba15002302d357426ae8940088d4168d4c16ccd5ce249035054310005c49926135573ca00226ea8004d5d0a80519a8140149aba150093335502f75ca05c6ae854020ccd540bdd728171aba1500733502804435742a00c66a05066aa0aa09aeb4d5d0a8029919191999ab9a3370e6aae754009200023350223232323333573466e1cd55cea80124000466a05466a086eb4d5d0a80118241aba135744a00446a0bc6a60be66ae712401035054310006049926135573ca00226ea8004d5d0a8011919191999ab9a3370e6aae7540092000233502833504375a6ae854008c120d5d09aba2500223505e35305f3357389201035054310006049926135573ca00226ea8004d5d09aba2500223505a35305b3357389201035054310005c49926135573ca00226ea8004d5d0a80219a8143ae35742a00666a05066aa0aaeb88004d5d0a801181d1aba135744a00446a0ac6a60ae66ae71241035054310005849926135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135573ca00226ea8004d5d0a8011919191999ab9a3370ea00290031180f981e1aba135573ca00646666ae68cdc3a801240084603c608c6ae84d55cf280211999ab9a3370ea00690011180f18189aba135573ca00a46666ae68cdc3a80224000460426eb8d5d09aab9e50062350513530523357389201035054310005349926499264984d55cea80089baa001357426ae8940088d4128d4c12ccd5ce249035054310004c49926104b13504935304a3357389201035054350004b4984d55cf280089baa0011375400226aae7940044dd50009109198008018011000911111111109199999999980080580500480400380300280200180110009109198008018011000891091980080180109000891091980080180109000891091980080180109000909111180200290911118018029091111801002909111180080290008919118011bac001320013550382233335573e0024a01c466a01a60086ae84008c00cd5d100101991919191999ab9a3370e6aae75400d200023330073232323333573466e1cd55cea8012400046601a60626ae854008cd404c0b4d5d09aba250022350363530373357389201035054310003849926135573ca00226ea8004d5d0a801999aa805bae500a35742a00466a01eeb8d5d09aba25002235032353033335738921035054310003449926135744a00226aae7940044dd50009110919980080200180110009109198008018011000899aa800bae75a224464460046eac004c8004d540c888c8cccd55cf80112804919a80419aa81998031aab9d5002300535573ca00460086ae8800c0b84d5d08008891001091091198008020018900089119191999ab9a3370ea002900011a80418029aba135573ca00646666ae68cdc3a801240044a01046a0526a605466ae712401035054310002b499264984d55cea80089baa001121223002003112200112001232323333573466e1cd55cea8012400046600c600e6ae854008dd69aba135744a00446a0466a604866ae71241035054310002549926135573ca00226ea80048848cc00400c00880048c8cccd5cd19b8735573aa002900011bae357426aae7940088d407cd4c080cd5ce24810350543100021499261375400224464646666ae68cdc3a800a40084a00e46666ae68cdc3a8012400446a014600c6ae84d55cf280211999ab9a3370ea00690001280511a8111a981199ab9c490103505431000244992649926135573aa00226ea8004484888c00c0104488800844888004480048c8cccd5cd19b8750014800880188cccd5cd19b8750024800080188d4068d4c06ccd5ce249035054310001c499264984d55ce9baa0011220021220012001232323232323333573466e1d4005200c200b23333573466e1d4009200a200d23333573466e1d400d200823300b375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c46601a6eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc048c050d5d0a8049bae357426ae8940248cccd5cd19b875006480088c050c054d5d09aab9e500b23333573466e1d401d2000230133016357426aae7940308d407cd4c080cd5ce2481035054310002149926499264992649926135573aa00826aae79400c4d55cf280109aab9e500113754002424444444600e01044244444446600c012010424444444600a010244444440082444444400644244444446600401201044244444446600201201040024646464646666ae68cdc3a800a400446660106eb4d5d0a8021bad35742a0066eb4d5d09aba2500323333573466e1d400920002300a300b357426aae7940188d4040d4c044cd5ce2490350543100012499264984d55cea80189aba25001135573ca00226ea80048488c00800c888488ccc00401401000c80048c8c8cccd5cd19b875001480088c018dd71aba135573ca00646666ae68cdc3a80124000460106eb8d5d09aab9e500423500a35300b3357389201035054310000c499264984d55cea80089baa001212230020032122300100320011122232323333573466e1cd55cea80124000466aa01a600c6ae854008c014d5d09aba25002235007353008335738921035054310000949926135573ca00226ea80044984800480048848cc00400c0088004448848cc00400c0084480048848cc00400c0088004448c8c00400488cc00cc008008004ccc8c8cc88cc88c8cc88c8cc88ccc888c8cc88c8c8c8ccc888c8cc88cc88c8c8c8c8cc88c8ccc888c8ccc888ccc888cc88cc88c8cc88cc88ccccc88888c8c8c8c8c8cccccccc88888888cccc8888cc88cc88cc88cc88cc88cc88cc88c8c8c8c8c8ccccc88888cc88c8c8c8c8c88888c88c8c8c8d4c10402488c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c88c8c8c8c94cd4c1fcccd54c13848004d41c141b88cc098d4d5422c04004880040640105400454cd4c1fccd5ce248102664600080011500110800115335307e33355304d120013506f506d2333573466e1ccd54090c13848004d4d542280400488c0c4005200408101080010031500115335307e335738920103664e540007f15001107f15335307d33353073120010780013355302112001253353505f3303135308401001223374a900019aba0375200466ae80dd48009bb14994060840044d422c05263502e122330023530850101f223308601002501f330023530850101f223308601501f0010011500415335307d3357389201036644480007e15004107e335530201200123535508801001220020013502c1223335502f23225335308001330265002019133005335508c013530380032225335350640012100113509001499400800440044d4c0d8004888008004d4c09406888d4c0cc00888888888894cd4d41a94cccd4c0cc02c8541b08541b08541b084ccd54c1644800541608d4c104004894cd4c234054cd4c23404ccd5cd19b8f353047002220023530470042200208f0108e011333573466e1cd4c11c00888004d4c11c0108800423c04238044238044d41c000c541bc02c84d4c10000488d4c110004888ccd54c0c84800488d4c124008888d4c1cc02088d4c1d401488c94cd4c26404cd4c204040148cd4c2080401094cd4c26c04ccd5cd19b8f00200109d0109c0115003109c01209c012335308201004209c0125335309b01333573466e3c00800427404270045400c4270044cd424404028024402454cd4d41e400c854cd4d41e800884cd4c1f80088cd4c1fc0088cd4c210040088cd4c214040088cc26404008004827c048cd4c21404008827c048cc2640400800488827c04888cd4c20404010827c048894cd4c28004ccd5cd19b870060030a2010a1011533530a001333573466e1c01400828804284044cc13c01000442840442840442680454cd4d41e4004842680442680542200403c4d425804d4c24804cd5ce249024c6600093014984d4c19406088c94cd4c1f0cc1d800d41385400454cd4c1f0cd5ce249036670410007d15001107d15335307b33075001504d15335307b3357389201036670420007c15003107c15003153353078333573466e40d4c1f80608800940581e81e454cd4c1e0ccd5cd19b90501635307e0182200107a07915002150011500115335307733573892010366705200078150011078132533530773335530461200135067507633335550730720720263335550755002353550820100f220014800800454cd4c1dcccd54c11848004d419d41d8cccd5541cc1c81c8098ccd5541d540094054cdc0a41fdfffffffffffffffe029068078008a99a983b999aa9823090009a833a83b1999aaa839839039013199aaa83aa8011a9aa8410080811000a40040022a66a60ee666ae68cdc399aa80e182309000800a400c0f20f02a0082a0062a0062a0062a0066a04e2446a604002a446a605c0044444444444666aa06c446a6aaa10602004444a66a611202666ae68cdc7801a80a04580845008998098028020802006981a00389a9aa84000806910010a99a983a19ab9c490102664d00075150011075153353073333573466e3cd4d541f94028880094cd4d4150cc098c8cccd4c11c004888cdd2a400466ae80c14c00ccd5d0183100119aba037500026ec526223374a900319aba030610023357406ea0004dd8a4c4466e95200433574060a400466ae80c184004dd8a4c4466e95200033574060a400466ae80d4c138004888d4d542100400c88d4d542180401088cdd2a400066ae80cccd541add4ba90040033357406666aa0d6ea5d480100099aba0375000a6ec5263762931919825009800a80728069080089a84000a4c0ea0e82a0022a66a60e666ae712410366704800074150011074153353072333573466e2540152000073074153353072333573466e2540192000073074153353072333573466e24cdc0a803a41a01e900003983a0a8010a8008a8008a8008a99a983899ab9c49103664d4c00072150011072153353070333573466e1ccd54054c0fc48004c0814019200807207115001153353070335738921036670540007115001107115335306f333573466e20cdc09a9aa83d280591000a80519b823370466e092030481e12078483403c1c41c05400454cd4c1bccd5ce2481037478560007015001107015335306e333573466e24cdc12801a80199b825001500207006f10701335738921036653510006f1337026a60b2018446a6aa0f400444666030a00e00400290404df70109a982c005911a9aa83c8009119980ba803001000899b81483fbfffffffffffffffc04ccc0494004d4d541d800c8800940244d4d541d540048800454cd4d4180d4068488ccd5407488d4d541e0008894cd4c1bccc05400401c4cc01801000c400c004c8d4c0800048888888888ccd54c0644800488d4c0c00088894cd4d417000484d4c16c01088cd4c198008802094cd4c1fcccd5cd19b8f00102008101080011335077335508b0100400600810081004506f00950051350764988854cd4d41880044008884d41e926135300e00322002135355070500122002135300c0012235301a0022222222222353502c004223535032002225333535036002213535033004225333535039002213355084010040011307f161307f161307c161307c16135304e001223535506f002223535507100322372666e28dc999b8a004003372666e28008004c8004d541ac88448894cd4d41640044008884cc014008ccd54c01c48004014010004c8004d541a88844894cd4d415c00454164884cd4168c010008cd54c018480040100044488cc8004c8004ccd54008c8cd414488ccd40c400c004008d40b8004cd4140888c00cc008004800488cdc0000a4004002900011199ab9a3370e6a6aa0ce0024466600a008004002900102f02e91119191800802990009aa8359119a9a82b000a4000446a6aa0d800444a66a60c6666ae68cdc78010048328320980380089803001990009aa8351119a9a82a800a4000446a6aa0d600444a66a60c4666ae68cdc780100383203188008980300191091980080180110009091111802002909111180180290911118010029091111800802900091199ab9a3370e0040020aa0a846a004244666aa00a446a6aa0c000444666aa012446a6aa0c800444a66a60b6666ae68cdc3800a40000ba0b82006266014666aaa0b200c0040020060060020020062466a002a090a092224464002640026aa0bc44a66a6a09200220064426600c0046008002446a60060024444444444a66a6a074666aa605024002a04e46a6aa0ca00244a66a60b8666ae68cdd780080782f02e89a81f8018a81f001109a81e9a9aa832800910010a81d911111111109199999999980080580500480400380300280200180110009109198008018011000911091998008020018011000910919800801801100089109198008018010900089109198008018010900089109198008018010900089091118018020891100108911000890009091111111803804110911111119803004804109111111180280409111111002091111110019109111111198010048041109111111198008048041000899a81291299a9a80a801108018800a80a190009aa81f9108911299a9a81680089a803001910999a8048029802001199aa980389000802802000891a9a81180091000891a9a81100091001099aa81d24500488100222122223330040070060052212222330030060052212222330020060052212222330010060052001222123330010040030022001222123330010040030022001235300200122353006002223374a900019aba03374a900019aba03010002335740a66a6a0140024266e95200033574066a601c002466e95200033574060240026ec5262223374a900119aba0375000666ae80dd400119aba037500026ec526376293099ba548008dd8a4c6ec5263357406ea000cdd8a4c442466002006004400244246600200600440022424460040062244002240024244600400644424466600200a0080064002466a6004002466e9520003357406ea4004dd8a4c466e9520023357406ea4004dd8a4c4244600400642446002006400246a6004002446a6aa046004446a6aa04a0064466e9520003357406666aa014ea5d480200199aba033335500a752ea4008004dd8a4c442466002006004400222444466e952000335740600800466ae80c00c004dd8a4c266a00c44a66a6026004200220280262466a00844666a6a02c006440040040026a6a028002440022466a00644666a6a00c006440040040026a6a00800244002244246600200600424002244246600200600424002640026aa030442444a66a6a00c0042a66a6a00c0022022442024442a66a6a0100062024442a66a60266600e0080042666a60122400200e006002202822440042442446600200800624002446a6aa026004446a6aa02a00644a66a6018666ae68cdc7802001007006899803801800880691199ab9a3371e004002012010222444446a6aaa00c0044446a6aaa012008444a66a601e6601600c0062a66a601e6601400a00426601200800220202020222444246660020080060042224002266a00a44a66a6006004200a200200424400424400240022442466002006004240024466008004002442466002006004400246a00c6a600466ae71240102764e00003498480048004448848cc00400c008448004498448c8c00400488cc00cc008008004cc88cc88ccc008cd540112211c406c221cad25b6832609bc24f649840763fae659cafa3472f26122ab00488101460033550044891c406c221cad25b6832609bc24f649840763fae659cafa3472f26122ab004881014c0033550044891c683356c1f1349e768e86c7289497ca7c23bd160e6bf92f6bfcd6225d004881015800222123330010040030022001112212330010030021120014891c4525fc81d32a03690296ea2c7bf06f12ea17d47f88fd3c17b1eac0ca0001",
                        "serialised_size": 6083,
                        "datum": {
                            "hash": "3316c5937f2fff8902214b2caa7a832684d28803d8b86cf741de897286cb8202",
                            "value": {
                                "fields": [
                                    {
                                        "bytes": "eb53d14aece2b314ebd6cf1bfcabf5cc7724b3e1563fc4c3392fd40911c50afb"
                                    },
                                    {
                                        "bytes": "edfc0f9eda2bd0368cf78b9db61bd67bf48c7bf816a16f0a3cc2bdcb94cccdbf"
                                    }
                                ],
                                "constructor": 0
                            },
                            "value_raw": "d8799f5820eb53d14aece2b314ebd6cf1bfcabf5cc7724b3e1563fc4c3392fd40911c50afb5820edfc0f9eda2bd0368cf78b9db61bd67bf48c7bf816a16f0a3cc2bdcb94cccdbfff"
                        }
                    }
                },
                {
                    "address": "addr_test1wrhtrx98lc6dc2zk0uuv0hjjcrffq5fvllq9k7u6cajfvhq0rqywz",
                    "hash": "9dd3f46919ef494dd7368bb42f732a77b20a64a088209391c3d4501624d23ba2",
                    "index": 0,
                    "value": 1689618,
                    "has_script": true,
                    "assets": [
                        {
                            "policy_id": "406c221cad25b6832609bc24f649840763fae659cafa3472f26122ab",
                            "asset_name": "F",
                            "fingerprint": "asset1r5mrxn5377473gus6jzq3n947j33flenl4qptm",
                            "quantity": 1
                        }
                    ],
                    "script": {
                        "type": "plutusV1",
                        "hash": "eeb198a7fe34dc28567f38c7de52c0d290512cffc05b7b9ac764965c",
                        "code": "5917c35917c001000033233223322332233223232333222323332223233333333222222223233322232333322223232332232333222323332223232332233223232333332222233223322332233223322332222323223223232533530343330093333573466e1cd55cea803a400046644660a80040026eb8d5d0a8039bae357426ae89401c8d4128d4c12ccd5ce249035054310004c499263333573466e1cd55cea8022400046464646666ae68cdc39aab9d5002480008cc88cc150008004ccd54135d73ae35742a004666aa09aeb9d71aba135744a00446a09c6a609e66ae712401035054310005049926135573ca00226ea8004d5d09aab9e500523504a35304b335738921035054310004c499263333573466e1cd55cea8012400046601864646464646464646464646666ae68cdc39aab9d500a480008cccccccccc068cd40a08c8c8cccd5cd19b8735573aa0049000119810181d9aba15002302d357426ae8940088d4168d4c16ccd5ce249035054310005c49926135573ca00226ea8004d5d0a80519a8140149aba150093335502f75ca05c6ae854020ccd540bdd728171aba1500733502804435742a00c66a05066aa0aa09aeb4d5d0a8029919191999ab9a3370e6aae754009200023350223232323333573466e1cd55cea80124000466a05466a086eb4d5d0a80118241aba135744a00446a0bc6a60be66ae712401035054310006049926135573ca00226ea8004d5d0a8011919191999ab9a3370e6aae7540092000233502833504375a6ae854008c120d5d09aba2500223505e35305f3357389201035054310006049926135573ca00226ea8004d5d09aba2500223505a35305b3357389201035054310005c49926135573ca00226ea8004d5d0a80219a8143ae35742a00666a05066aa0aaeb88004d5d0a801181d1aba135744a00446a0ac6a60ae66ae71241035054310005849926135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135573ca00226ea8004d5d0a8011919191999ab9a3370ea00290031180f981e1aba135573ca00646666ae68cdc3a801240084603c608c6ae84d55cf280211999ab9a3370ea00690011180f18189aba135573ca00a46666ae68cdc3a80224000460426eb8d5d09aab9e50062350513530523357389201035054310005349926499264984d55cea80089baa001357426ae8940088d4128d4c12ccd5ce249035054310004c49926104b13504935304a3357389201035054350004b4984d55cf280089baa0011375400226aae7940044dd50009109198008018011000911111111109199999999980080580500480400380300280200180110009109198008018011000891091980080180109000891091980080180109000891091980080180109000909111180200290911118018029091111801002909111180080290008919118011bac001320013550382233335573e0024a01c466a01a60086ae84008c00cd5d100101991919191999ab9a3370e6aae75400d200023330073232323333573466e1cd55cea8012400046601a60626ae854008cd404c0b4d5d09aba250022350363530373357389201035054310003849926135573ca00226ea8004d5d0a801999aa805bae500a35742a00466a01eeb8d5d09aba25002235032353033335738921035054310003449926135744a00226aae7940044dd50009110919980080200180110009109198008018011000899aa800bae75a224464460046eac004c8004d540c888c8cccd55cf80112804919a80419aa81998031aab9d5002300535573ca00460086ae8800c0b84d5d08008891001091091198008020018900089119191999ab9a3370ea002900011a80418029aba135573ca00646666ae68cdc3a801240044a01046a0526a605466ae712401035054310002b499264984d55cea80089baa001121223002003112200112001232323333573466e1cd55cea8012400046600c600e6ae854008dd69aba135744a00446a0466a604866ae71241035054310002549926135573ca00226ea80048848cc00400c00880048c8cccd5cd19b8735573aa002900011bae357426aae7940088d407cd4c080cd5ce24810350543100021499261375400224464646666ae68cdc3a800a40084a00e46666ae68cdc3a8012400446a014600c6ae84d55cf280211999ab9a3370ea00690001280511a8111a981199ab9c490103505431000244992649926135573aa00226ea8004484888c00c0104488800844888004480048c8cccd5cd19b8750014800880188cccd5cd19b8750024800080188d4068d4c06ccd5ce249035054310001c499264984d55ce9baa0011220021220012001232323232323333573466e1d4005200c200b23333573466e1d4009200a200d23333573466e1d400d200823300b375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c46601a6eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc048c050d5d0a8049bae357426ae8940248cccd5cd19b875006480088c050c054d5d09aab9e500b23333573466e1d401d2000230133016357426aae7940308d407cd4c080cd5ce2481035054310002149926499264992649926135573aa00826aae79400c4d55cf280109aab9e500113754002424444444600e01044244444446600c012010424444444600a010244444440082444444400644244444446600401201044244444446600201201040024646464646666ae68cdc3a800a400446660106eb4d5d0a8021bad35742a0066eb4d5d09aba2500323333573466e1d400920002300a300b357426aae7940188d4040d4c044cd5ce2490350543100012499264984d55cea80189aba25001135573ca00226ea80048488c00800c888488ccc00401401000c80048c8c8cccd5cd19b875001480088c018dd71aba135573ca00646666ae68cdc3a80124000460106eb8d5d09aab9e500423500a35300b3357389201035054310000c499264984d55cea80089baa001212230020032122300100320011122232323333573466e1cd55cea80124000466aa01a600c6ae854008c014d5d09aba25002235007353008335738921035054310000949926135573ca00226ea80044984800480048848cc00400c0088004448848cc00400c0084480048848cc00400c0088004448c8c00400488cc00cc008008004ccc8c8cc88cc88c8cc88c8cc88ccc888c8cc88c8c8c8ccc888c8cc88cc88c8c8c8c8cc88c8ccc888c8ccc888ccc888cc88cc88c8cc88cc88ccccc88888c8c8c8c8c8cccccccc88888888cccc8888cc88cc88cc88cc88cc88cc88cc88c8c8c8c8c8ccccc88888cc88c8c8c8c8c88888c88c8c8c8d4c10402488c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c88c8c8c8c94cd4c1fcccd54c13848004d41c141b88cc098d4d5422c04004880040640105400454cd4c1fccd5ce248102664600080011500110800115335307e33355304d120013506f506d2333573466e1ccd54090c13848004d4d542280400488c0c4005200408101080010031500115335307e335738920103664e540007f15001107f15335307d33353073120010780013355302112001253353505f3303135308401001223374a900019aba0375200466ae80dd48009bb14994060840044d422c05263502e122330023530850101f223308601002501f330023530850101f223308601501f0010011500415335307d3357389201036644480007e15004107e335530201200123535508801001220020013502c1223335502f23225335308001330265002019133005335508c013530380032225335350640012100113509001499400800440044d4c0d8004888008004d4c09406888d4c0cc00888888888894cd4d41a94cccd4c0cc02c8541b08541b08541b084ccd54c1644800541608d4c104004894cd4c234054cd4c23404ccd5cd19b8f353047002220023530470042200208f0108e011333573466e1cd4c11c00888004d4c11c0108800423c04238044238044d41c000c541bc02c84d4c10000488d4c110004888ccd54c0c84800488d4c124008888d4c1cc02088d4c1d401488c94cd4c26404cd4c204040148cd4c2080401094cd4c26c04ccd5cd19b8f00200109d0109c0115003109c01209c012335308201004209c0125335309b01333573466e3c00800427404270045400c4270044cd424404028024402454cd4d41e400c854cd4d41e800884cd4c1f80088cd4c1fc0088cd4c210040088cd4c214040088cc26404008004827c048cd4c21404008827c048cc2640400800488827c04888cd4c20404010827c048894cd4c28004ccd5cd19b870060030a2010a1011533530a001333573466e1c01400828804284044cc13c01000442840442840442680454cd4d41e4004842680442680542200403c4d425804d4c24804cd5ce249024c6600093014984d4c19406088c94cd4c1f0cc1d800d41385400454cd4c1f0cd5ce249036670410007d15001107d15335307b33075001504d15335307b3357389201036670420007c15003107c15003153353078333573466e40d4c1f80608800940581e81e454cd4c1e0ccd5cd19b90501635307e0182200107a07915002150011500115335307733573892010366705200078150011078132533530773335530461200135067507633335550730720720263335550755002353550820100f220014800800454cd4c1dcccd54c11848004d419d41d8cccd5541cc1c81c8098ccd5541d540094054cdc0a41fdfffffffffffffffe029068078008a99a983b999aa9823090009a833a83b1999aaa839839039013199aaa83aa8011a9aa8410080811000a40040022a66a60ee666ae68cdc399aa80e182309000800a400c0f20f02a0082a0062a0062a0062a0066a04e2446a604002a446a605c0044444444444666aa06c446a6aaa10602004444a66a611202666ae68cdc7801a80a04580845008998098028020802006981a00389a9aa84000806910010a99a983a19ab9c490102664d00075150011075153353073333573466e3cd4d541f94028880094cd4d4150cc098c8cccd4c11c004888cdd2a400466ae80c14c00ccd5d0183100119aba037500026ec526223374a900319aba030610023357406ea0004dd8a4c4466e95200433574060a400466ae80c184004dd8a4c4466e95200033574060a400466ae80d4c138004888d4d542100400c88d4d542180401088cdd2a400066ae80cccd541add4ba90040033357406666aa0d6ea5d480100099aba0375000a6ec5263762931919825009800a80728069080089a84000a4c0ea0e82a0022a66a60e666ae712410366704800074150011074153353072333573466e2540152000073074153353072333573466e2540192000073074153353072333573466e24cdc0a803a41a01e900003983a0a8010a8008a8008a8008a99a983899ab9c49103664d4c00072150011072153353070333573466e1ccd54054c0fc48004c0814019200807207115001153353070335738921036670540007115001107115335306f333573466e20cdc09a9aa83d280591000a80519b823370466e092030481e12078483403c1c41c05400454cd4c1bccd5ce2481037478560007015001107015335306e333573466e24cdc12801a80199b825001500207006f10701335738921036653510006f1337026a60b2018446a6aa0f400444666030a00e00400290404df70109a982c005911a9aa83c8009119980ba803001000899b81483fbfffffffffffffffc04ccc0494004d4d541d800c8800940244d4d541d540048800454cd4d4180d4068488ccd5407488d4d541e0008894cd4c1bccc05400401c4cc01801000c400c004c8d4c0800048888888888ccd54c0644800488d4c0c00088894cd4d417000484d4c16c01088cd4c198008802094cd4c1fcccd5cd19b8f00102008101080011335077335508b0100400600810081004506f00950051350764988854cd4d41880044008884d41e926135300e00322002135355070500122002135300c0012235301a0022222222222353502c004223535032002225333535036002213535033004225333535039002213355084010040011307f161307f161307c161307c16135304e001223535506f002223535507100322372666e28dc999b8a004003372666e28008004c8004d541ac88448894cd4d41640044008884cc014008ccd54c01c48004014010004c8004d541a88844894cd4d415c00454164884cd4168c010008cd54c018480040100044488cc8004c8004ccd54008c8cd414488ccd40c400c004008d40b8004cd4140888c00cc008004800488cdc0000a4004002900011199ab9a3370e6a6aa0ce0024466600a008004002900102f02e91119191800802990009aa8359119a9a82b000a4000446a6aa0d800444a66a60c6666ae68cdc78010048328320980380089803001990009aa8351119a9a82a800a4000446a6aa0d600444a66a60c4666ae68cdc780100383203188008980300191091980080180110009091111802002909111180180290911118010029091111800802900091199ab9a3370e0040020aa0a846a004244666aa00a446a6aa0c000444666aa012446a6aa0c800444a66a60b6666ae68cdc3800a40000ba0b82006266014666aaa0b200c0040020060060020020062466a002a090a092224464002640026aa0bc44a66a6a09200220064426600c0046008002446a60060024444444444a66a6a074666aa605024002a04e46a6aa0ca00244a66a60b8666ae68cdd780080782f02e89a81f8018a81f001109a81e9a9aa832800910010a81d911111111109199999999980080580500480400380300280200180110009109198008018011000911091998008020018011000910919800801801100089109198008018010900089109198008018010900089109198008018010900089091118018020891100108911000890009091111111803804110911111119803004804109111111180280409111111002091111110019109111111198010048041109111111198008048041000899a81291299a9a80a801108018800a80a190009aa81f9108911299a9a81680089a803001910999a8048029802001199aa980389000802802000891a9a81180091000891a9a81100091001099aa81d24500488100222122223330040070060052212222330030060052212222330020060052212222330010060052001222123330010040030022001222123330010040030022001235300200122353006002223374a900019aba03374a900019aba03010002335740a66a6a0140024266e95200033574066a601c002466e95200033574060240026ec5262223374a900119aba0375000666ae80dd400119aba037500026ec526376293099ba548008dd8a4c6ec5263357406ea000cdd8a4c442466002006004400244246600200600440022424460040062244002240024244600400644424466600200a0080064002466a6004002466e9520003357406ea4004dd8a4c466e9520023357406ea4004dd8a4c4244600400642446002006400246a6004002446a6aa046004446a6aa04a0064466e9520003357406666aa014ea5d480200199aba033335500a752ea4008004dd8a4c442466002006004400222444466e952000335740600800466ae80c00c004dd8a4c266a00c44a66a6026004200220280262466a00844666a6a02c006440040040026a6a028002440022466a00644666a6a00c006440040040026a6a00800244002244246600200600424002244246600200600424002640026aa030442444a66a6a00c0042a66a6a00c0022022442024442a66a6a0100062024442a66a60266600e0080042666a60122400200e006002202822440042442446600200800624002446a6aa026004446a6aa02a00644a66a6018666ae68cdc7802001007006899803801800880691199ab9a3371e004002012010222444446a6aaa00c0044446a6aaa012008444a66a601e6601600c0062a66a601e6601400a00426601200800220202020222444246660020080060042224002266a00a44a66a6006004200a200200424400424400240022442466002006004240024466008004002442466002006004400246a00c6a600466ae71240102764e00003498480048004448848cc00400c008448004498448c8c00400488cc00cc008008004cc88cc88ccc008cd540112211c406c221cad25b6832609bc24f649840763fae659cafa3472f26122ab00488101460033550044891c406c221cad25b6832609bc24f649840763fae659cafa3472f26122ab004881014c0033550044891c683356c1f1349e768e86c7289497ca7c23bd160e6bf92f6bfcd6225d004881015800222123330010040030022001112212330010030021120014891c4525fc81d32a03690296ea2c7bf06f12ea17d47f88fd3c17b1eac0ca0001",
                        "serialised_size": 6083,
                        "datum": {
                            "hash": "f22480c8832f38a19a69c218dae9303503c5034d1910f22f08564f9bef5f51f7",
                            "value": {
                                "fields": [
                                    {
                                        "bytes": "eb259931b97b79aad7743793cb558d581932710c3dc0be4735e68998aa358a19"
                                    },
                                    {
                                        "bytes": "eb53d14aece2b314ebd6cf1bfcabf5cc7724b3e1563fc4c3392fd40911c50afb"
                                    }
                                ],
                                "constructor": 0
                            },
                            "value_raw": "d8799f5820eb259931b97b79aad7743793cb558d581932710c3dc0be4735e68998aa358a195820eb53d14aece2b314ebd6cf1bfcabf5cc7724b3e1563fc4c3392fd40911c50afbff"
                        }
                    }
                }
            ],
            "cursor": "df7ce454aed265c0df"
        }

        // act
        const response = await api.listAddressAssetUtxos(address, asset, size);

        // assert
        expect(response.result).deep.equal(result);
    })

})